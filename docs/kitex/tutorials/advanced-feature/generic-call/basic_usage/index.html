<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.142.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Basic Usage | CloudWeGo</title>
<meta name=description content="A leading practice for building enterprise cloud native middleware!"><meta property="og:url" content="https://www.cloudwego.io/docs/kitex/tutorials/advanced-feature/generic-call/basic_usage/"><meta property="og:site_name" content="CloudWeGo"><meta property="og:title" content="Basic Usage"><meta property="og:description" content="Basic usage of generic call"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2024-01-24T00:00:00+00:00"><meta property="article:modified_time" content="2025-08-18T10:44:57+08:00"><meta itemprop=name content="Basic Usage"><meta itemprop=description content="Basic usage of generic call"><meta itemprop=datePublished content="2024-01-24T00:00:00+00:00"><meta itemprop=dateModified content="2025-08-18T10:44:57+08:00"><meta itemprop=wordCount content="5637"><meta itemprop=keywords content="generic-call,HTTP,Thrift"><meta name=twitter:card content="summary"><meta name=twitter:title content="Basic Usage"><meta name=twitter:description content="Basic usage of generic call"><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYWRQRLPRM"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYWRQRLPRM")</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?f1808c42af827f368aa7eca3baae6d55",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel=preload href=/scss/main.min.8dda0a7e68c787c1e8d950ad927bf6783703a0048d569c37d9e7d2726622eaff.css as=style><link href=/scss/main.min.8dda0a7e68c787c1e8d950ad927bf6783703a0048d569c37d9e7d2726622eaff.css rel=stylesheet integrity><script src=/js/jquery.min.js></script><link rel=stylesheet href=/css/prism.css><link rel=stylesheet href=/css/docsearch.css></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand-xl navbar-dark td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><img src=/img/logo.png></span>
</a><button class=navbar-toggler type=button data-toggle=collapse data-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0 ml-auto"><li class="dropdown sub-menu active"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Documentation</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/kitex/>Kitex</a>
<a class=dropdown-item href=/docs/hertz/>Hertz</a>
<a class=dropdown-item href=/docs/volo/>Volo</a>
<a class=dropdown-item href=/docs/netpoll/>Netpoll</a>
<a class=dropdown-item href=/docs/cwgo/>Cwgo</a>
<a class=dropdown-item href=/docs/eino/>Eino</a>
<a class=dropdown-item href=/docs/monolake/>Monolake</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cooperation/><span>Cooperation</span></a></li><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Security</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/security/safety-bulletin/>safety-bulletin</a>
<a class=dropdown-item href=/security/vulnerability-reporting/>vulnerability-reporting</a></div></li><li class="nav-item dropdown mr-4"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/kitex/tutorials/advanced-feature/generic-call/basic_usage/>中文</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><div id=docsearch></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div id=docsearch></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/kitex/tutorials/advanced-feature/generic-call/basic_usage/>中文</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docskitex-li><input type=checkbox id=m-docskitex-check checked>
<label for=m-docskitex-check><a href=/docs/kitex/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitex><span>Kitex</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexoverview-li><input type=checkbox id=m-docskitexoverview-check checked>
<label for=m-docskitexoverview-check><a href=/docs/kitex/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexoverview><span>Overview</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitexgetting-started-li><input type=checkbox id=m-docskitexgetting-started-check checked>
<label for=m-docskitexgetting-started-check><a href=/docs/kitex/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexgetting-started><span>Getting Started</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexgetting-startedpre-knowledge-li><input type=checkbox id=m-docskitexgetting-startedpre-knowledge-check>
<label for=m-docskitexgetting-startedpre-knowledge-check><a href=/docs/kitex/getting-started/pre-knowledge/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexgetting-startedpre-knowledge><span>Pre-knowledge</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexgetting-startedprerequisite-li><input type=checkbox id=m-docskitexgetting-startedprerequisite-check>
<label for=m-docskitexgetting-startedprerequisite-check><a href=/docs/kitex/getting-started/prerequisite/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexgetting-startedprerequisite><span>Environment Preparation</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexgetting-startedquick_start-li><input type=checkbox id=m-docskitexgetting-startedquick_start-check>
<label for=m-docskitexgetting-startedquick_start-check><a href=/docs/kitex/getting-started/quick_start/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexgetting-startedquick_start><span>Basic Example</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexgetting-startedtutorial-li><input type=checkbox id=m-docskitexgetting-startedtutorial-check>
<label for=m-docskitexgetting-startedtutorial-check><a href=/docs/kitex/getting-started/tutorial/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexgetting-startedtutorial><span>Advanced Tutorial</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexgetting-startedexamples-li><input type=checkbox id=m-docskitexgetting-startedexamples-check>
<label for=m-docskitexgetting-startedexamples-check><a href=/docs/kitex/getting-started/examples/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexgetting-startedexamples><span>Code Examples</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docskitextutorials-li><input type=checkbox id=m-docskitextutorials-check checked>
<label for=m-docskitextutorials-check><a href=/docs/kitex/tutorials/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorials><span>Tutorials</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsbasic-feature-li><input type=checkbox id=m-docskitextutorialsbasic-feature-check>
<label for=m-docskitextutorialsbasic-feature-check><a href=/docs/kitex/tutorials/basic-feature/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsbasic-feature><span>Basic Feature</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featuremessage_type-li><input type=checkbox id=m-docskitextutorialsbasic-featuremessage_type-check>
<label for=m-docskitextutorialsbasic-featuremessage_type-check><a href=/docs/kitex/tutorials/basic-feature/message_type/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featuremessage_type><span>Message Types</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsbasic-featurestreamx-li><input type=checkbox id=m-docskitextutorialsbasic-featurestreamx-check>
<label for=m-docskitextutorialsbasic-featurestreamx-check><a href=/docs/kitex/tutorials/basic-feature/streamx/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsbasic-featurestreamx><span>StreamX</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurestreamxstreamx_basic_programming-li><input type=checkbox id=m-docskitextutorialsbasic-featurestreamxstreamx_basic_programming-check>
<label for=m-docskitextutorialsbasic-featurestreamxstreamx_basic_programming-check><a href=/docs/kitex/tutorials/basic-feature/streamx/streamx_basic_programming/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurestreamxstreamx_basic_programming><span>StreamX Basic Programming</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurestreamxstreamx_middleware-li><input type=checkbox id=m-docskitextutorialsbasic-featurestreamxstreamx_middleware-check>
<label for=m-docskitextutorialsbasic-featurestreamxstreamx_middleware-check><a href=/docs/kitex/tutorials/basic-feature/streamx/streamx_middleware/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurestreamxstreamx_middleware><span>StreamX Middleware</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurestreamxstreamx_metainfo-li><input type=checkbox id=m-docskitextutorialsbasic-featurestreamxstreamx_metainfo-check>
<label for=m-docskitextutorialsbasic-featurestreamxstreamx_metainfo-check><a href=/docs/kitex/tutorials/basic-feature/streamx/streamx_metainfo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurestreamxstreamx_metainfo><span>StreamX Metainfo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurestreamxstreamx_error_handling-li><input type=checkbox id=m-docskitextutorialsbasic-featurestreamxstreamx_error_handling-check>
<label for=m-docskitextutorialsbasic-featurestreamxstreamx_error_handling-check><a href=/docs/kitex/tutorials/basic-feature/streamx/streamx_error_handling/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurestreamxstreamx_error_handling><span>StreamX Error Handling</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurestreamxstreamx_faq-li><input type=checkbox id=m-docskitextutorialsbasic-featurestreamxstreamx_faq-check>
<label for=m-docskitextutorialsbasic-featurestreamxstreamx_faq-check><a href=/docs/kitex/tutorials/basic-feature/streamx/streamx_faq/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurestreamxstreamx_faq><span>StreamX FAQ</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurestreamxstreamx_timeout_control-li><input type=checkbox id=m-docskitextutorialsbasic-featurestreamxstreamx_timeout_control-check>
<label for=m-docskitextutorialsbasic-featurestreamxstreamx_timeout_control-check><a href=/docs/kitex/tutorials/basic-feature/streamx/streamx_timeout_control/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurestreamxstreamx_timeout_control><span>StreamX Timeout Control</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsbasic-featureprotocol-li><input type=checkbox id=m-docskitextutorialsbasic-featureprotocol-check>
<label for=m-docskitextutorialsbasic-featureprotocol-check><a href=/docs/kitex/tutorials/basic-feature/protocol/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsbasic-featureprotocol><span>Protocol</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureprotocoltransport_protocol-li><input type=checkbox id=m-docskitextutorialsbasic-featureprotocoltransport_protocol-check>
<label for=m-docskitextutorialsbasic-featureprotocoltransport_protocol-check><a href=/docs/kitex/tutorials/basic-feature/protocol/transport_protocol/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureprotocoltransport_protocol><span>Transport Protocol</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsbasic-featureprotocolstreaming-li><input type=checkbox id=m-docskitextutorialsbasic-featureprotocolstreaming-check>
<label for=m-docskitextutorialsbasic-featureprotocolstreaming-check><a href=/docs/kitex/tutorials/basic-feature/protocol/streaming/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsbasic-featureprotocolstreaming><span>Streaming</span></a></label><ul class="ul-6 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsbasic-featureprotocolstreaminggrpc-li><input type=checkbox id=m-docskitextutorialsbasic-featureprotocolstreaminggrpc-check>
<label for=m-docskitextutorialsbasic-featureprotocolstreaminggrpc-check><a href=/docs/kitex/tutorials/basic-feature/protocol/streaming/grpc/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsbasic-featureprotocolstreaminggrpc><span>gRPC</span></a></label><ul class="ul-7 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureprotocolstreaminggrpcthrift_streaming-li><input type=checkbox id=m-docskitextutorialsbasic-featureprotocolstreaminggrpcthrift_streaming-check>
<label for=m-docskitextutorialsbasic-featureprotocolstreaminggrpcthrift_streaming-check><a href=/docs/kitex/tutorials/basic-feature/protocol/streaming/grpc/thrift_streaming/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureprotocolstreaminggrpcthrift_streaming><span>Thrift Streaming over gRPC</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureprotocolstreaminggrpcgraceful_shutdown-li><input type=checkbox id=m-docskitextutorialsbasic-featureprotocolstreaminggrpcgraceful_shutdown-check>
<label for=m-docskitextutorialsbasic-featureprotocolstreaminggrpcgraceful_shutdown-check><a href=/docs/kitex/tutorials/basic-feature/protocol/streaming/grpc/graceful_shutdown/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureprotocolstreaminggrpcgraceful_shutdown><span>gRPC Streaming Graceful Shutdown</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsbasic-featureprotocolserialization-protocol-li><input type=checkbox id=m-docskitextutorialsbasic-featureprotocolserialization-protocol-check>
<label for=m-docskitextutorialsbasic-featureprotocolserialization-protocol-check><a href=/docs/kitex/tutorials/basic-feature/protocol/serialization-protocol/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsbasic-featureprotocolserialization-protocol><span>Serialization Protocol</span></a></label><ul class="ul-6 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureprotocolserialization-protocolbinary-li><input type=checkbox id=m-docskitextutorialsbasic-featureprotocolserialization-protocolbinary-check>
<label for=m-docskitextutorialsbasic-featureprotocolserialization-protocolbinary-check><a href=/docs/kitex/tutorials/basic-feature/protocol/serialization-protocol/binary/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureprotocolserialization-protocolbinary><span>Binary</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureprotocolserialization-protocolprotobuf-li><input type=checkbox id=m-docskitextutorialsbasic-featureprotocolserialization-protocolprotobuf-check>
<label for=m-docskitextutorialsbasic-featureprotocolserialization-protocolprotobuf-check><a href=/docs/kitex/tutorials/basic-feature/protocol/serialization-protocol/protobuf/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureprotocolserialization-protocolprotobuf><span>Protobuf</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureprotocolserialization-protocolhessian2-li><input type=checkbox id=m-docskitextutorialsbasic-featureprotocolserialization-protocolhessian2-check>
<label for=m-docskitextutorialsbasic-featureprotocolserialization-protocolhessian2-check><a href=/docs/kitex/tutorials/basic-feature/protocol/serialization-protocol/hessian2/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureprotocolserialization-protocolhessian2><span>Hessian2</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurevisit_directly-li><input type=checkbox id=m-docskitextutorialsbasic-featurevisit_directly-check>
<label for=m-docskitextutorialsbasic-featurevisit_directly-check><a href=/docs/kitex/tutorials/basic-feature/visit_directly/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurevisit_directly><span>Visit Directly</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureconnection_type-li><input type=checkbox id=m-docskitextutorialsbasic-featureconnection_type-check>
<label for=m-docskitextutorialsbasic-featureconnection_type-check><a href=/docs/kitex/tutorials/basic-feature/connection_type/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureconnection_type><span>Connection Type</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurebizstatuserr-li><input type=checkbox id=m-docskitextutorialsbasic-featurebizstatuserr-check>
<label for=m-docskitextutorialsbasic-featurebizstatuserr-check><a href=/docs/kitex/tutorials/basic-feature/bizstatuserr/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurebizstatuserr><span>Business Exception</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurewarming_up-li><input type=checkbox id=m-docskitextutorialsbasic-featurewarming_up-check>
<label for=m-docskitextutorialsbasic-featurewarming_up-check><a href=/docs/kitex/tutorials/basic-feature/warming_up/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurewarming_up><span>Warming Up</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featurepanic-li><input type=checkbox id=m-docskitextutorialsbasic-featurepanic-check>
<label for=m-docskitextutorialsbasic-featurepanic-check><a href=/docs/kitex/tutorials/basic-feature/panic/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featurepanic><span>Deal with panic</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsbasic-featureacquire_rpcinfo-li><input type=checkbox id=m-docskitextutorialsbasic-featureacquire_rpcinfo-check>
<label for=m-docskitextutorialsbasic-featureacquire_rpcinfo-check><a href=/docs/kitex/tutorials/basic-feature/acquire_rpcinfo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsbasic-featureacquire_rpcinfo><span>Acquire Kitex RPC Info</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsservice-governance-li><input type=checkbox id=m-docskitextutorialsservice-governance-check>
<label for=m-docskitextutorialsservice-governance-check><a href=/docs/kitex/tutorials/service-governance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsservice-governance><span>Service Governance</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governanceloadbalance-li><input type=checkbox id=m-docskitextutorialsservice-governanceloadbalance-check>
<label for=m-docskitextutorialsservice-governanceloadbalance-check><a href=/docs/kitex/tutorials/service-governance/loadbalance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governanceloadbalance><span>LoadBalancer</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governancetimeout-li><input type=checkbox id=m-docskitextutorialsservice-governancetimeout-check>
<label for=m-docskitextutorialsservice-governancetimeout-check><a href=/docs/kitex/tutorials/service-governance/timeout/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governancetimeout><span>Timeouts</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governanceretry-li><input type=checkbox id=m-docskitextutorialsservice-governanceretry-check>
<label for=m-docskitextutorialsservice-governanceretry-check><a href=/docs/kitex/tutorials/service-governance/retry/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governanceretry><span>Retry</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governancecircuitbreaker-li><input type=checkbox id=m-docskitextutorialsservice-governancecircuitbreaker-check>
<label for=m-docskitextutorialsservice-governancecircuitbreaker-check><a href=/docs/kitex/tutorials/service-governance/circuitbreaker/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governancecircuitbreaker><span>Circuit Breaker</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governancefallback-li><input type=checkbox id=m-docskitextutorialsservice-governancefallback-check>
<label for=m-docskitextutorialsservice-governancefallback-check><a href=/docs/kitex/tutorials/service-governance/fallback/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governancefallback><span>Fallback</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governancelimiting-li><input type=checkbox id=m-docskitextutorialsservice-governancelimiting-check>
<label for=m-docskitextutorialsservice-governancelimiting-check><a href=/docs/kitex/tutorials/service-governance/limiting/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governancelimiting><span>Rate Limiting</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsservice-governanceaccess_control-li><input type=checkbox id=m-docskitextutorialsservice-governanceaccess_control-check>
<label for=m-docskitextutorialsservice-governanceaccess_control-check><a href=/docs/kitex/tutorials/service-governance/access_control/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsservice-governanceaccess_control><span>Customized Access Control</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsobservability-li><input type=checkbox id=m-docskitextutorialsobservability-check>
<label for=m-docskitextutorialsobservability-check><a href=/docs/kitex/tutorials/observability/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsobservability><span>Observability</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsobservabilityinstrumentation-li><input type=checkbox id=m-docskitextutorialsobservabilityinstrumentation-check>
<label for=m-docskitextutorialsobservabilityinstrumentation-check><a href=/docs/kitex/tutorials/observability/instrumentation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsobservabilityinstrumentation><span>Instrumentation Control</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsobservabilitytracing-li><input type=checkbox id=m-docskitextutorialsobservabilitytracing-check>
<label for=m-docskitextutorialsobservabilitytracing-check><a href=/docs/kitex/tutorials/observability/tracing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsobservabilitytracing><span>Tracing</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsobservabilitylogging-li><input type=checkbox id=m-docskitextutorialsobservabilitylogging-check>
<label for=m-docskitextutorialsobservabilitylogging-check><a href=/docs/kitex/tutorials/observability/logging/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsobservabilitylogging><span>Logging</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docskitextutorialsadvanced-feature-li><input type=checkbox id=m-docskitextutorialsadvanced-feature-check checked>
<label for=m-docskitextutorialsadvanced-feature-check><a href=/docs/kitex/tutorials/advanced-feature/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsadvanced-feature><span>Advanced Feature</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurepayload_validator-li><input type=checkbox id=m-docskitextutorialsadvanced-featurepayload_validator-check>
<label for=m-docskitextutorialsadvanced-featurepayload_validator-check><a href=/docs/kitex/tutorials/advanced-feature/payload_validator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurepayload_validator><span>Payload Validator</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docskitextutorialsadvanced-featuregeneric-call-li><input type=checkbox id=m-docskitextutorialsadvanced-featuregeneric-call-check checked>
<label for=m-docskitextutorialsadvanced-featuregeneric-call-check><a href=/docs/kitex/tutorials/advanced-feature/generic-call/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsadvanced-featuregeneric-call><span>Generic Call</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docskitextutorialsadvanced-featuregeneric-callbasic_usage-li><input type=checkbox id=m-docskitextutorialsadvanced-featuregeneric-callbasic_usage-check checked>
<label for=m-docskitextutorialsadvanced-featuregeneric-callbasic_usage-check><a href=/docs/kitex/tutorials/advanced-feature/generic-call/basic_usage/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuregeneric-callbasic_usage><span class=td-sidebar-nav-active-item>Basic Usage</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards-li><input type=checkbox id=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards-check>
<label for=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards-check><a href=/docs/kitex/tutorials/advanced-feature/generic-call/thrift_idl_annotation_standards/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuregeneric-callthrift_idl_annotation_standards><span>IDL Definition Specification for Mapping between Thrift and HTTP</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuregeneric-callgeneric-call-dynamicgo-li><input type=checkbox id=m-docskitextutorialsadvanced-featuregeneric-callgeneric-call-dynamicgo-check>
<label for=m-docskitextutorialsadvanced-featuregeneric-callgeneric-call-dynamicgo-check><a href=/docs/kitex/tutorials/advanced-feature/generic-call/generic-call-dynamicgo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuregeneric-callgeneric-call-dynamicgo><span>User guide to generic call with dynamicgo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuregeneric-callgeneric-call-reflection-li><input type=checkbox id=m-docskitextutorialsadvanced-featuregeneric-callgeneric-call-reflection-check>
<label for=m-docskitextutorialsadvanced-featuregeneric-callgeneric-call-reflection-check><a href=/docs/kitex/tutorials/advanced-feature/generic-call/generic-call-reflection/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuregeneric-callgeneric-call-reflection><span>Use Thrift reflection to improve generic-call performance</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuremetainfo-li><input type=checkbox id=m-docskitextutorialsadvanced-featuremetainfo-check>
<label for=m-docskitextutorialsadvanced-featuremetainfo-check><a href=/docs/kitex/tutorials/advanced-feature/metainfo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuremetainfo><span>Metainfo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featureinvoker-li><input type=checkbox id=m-docskitextutorialsadvanced-featureinvoker-check>
<label for=m-docskitextutorialsadvanced-featureinvoker-check><a href=/docs/kitex/tutorials/advanced-feature/invoker/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featureinvoker><span>Server SDK Mode</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featureerror_handler-li><input type=checkbox id=m-docskitextutorialsadvanced-featureerror_handler-check>
<label for=m-docskitextutorialsadvanced-featureerror_handler-check><a href=/docs/kitex/tutorials/advanced-feature/error_handler/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featureerror_handler><span>Customize Error Handler</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurestart_shutdown_hook-li><input type=checkbox id=m-docskitextutorialsadvanced-featurestart_shutdown_hook-check>
<label for=m-docskitextutorialsadvanced-featurestart_shutdown_hook-check><a href=/docs/kitex/tutorials/advanced-feature/start_shutdown_hook/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurestart_shutdown_hook><span>Customize Hook for Start/Shutdown of Server-side</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuregrpcproxy-li><input type=checkbox id=m-docskitextutorialsadvanced-featuregrpcproxy-check>
<label for=m-docskitextutorialsadvanced-featuregrpcproxy-check><a href=/docs/kitex/tutorials/advanced-feature/grpcproxy/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuregrpcproxy><span>gRPC Proxy</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurecodec_frugal-li><input type=checkbox id=m-docskitextutorialsadvanced-featurecodec_frugal-check>
<label for=m-docskitextutorialsadvanced-featurecodec_frugal-check><a href=/docs/kitex/tutorials/advanced-feature/codec_frugal/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurecodec_frugal><span>Frugal</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurexds-li><input type=checkbox id=m-docskitextutorialsadvanced-featurexds-check>
<label for=m-docskitextutorialsadvanced-featurexds-check><a href=/docs/kitex/tutorials/advanced-feature/xds/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurexds><span>xDS Support</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featurefieldmask-li><input type=checkbox id=m-docskitextutorialsadvanced-featurefieldmask-check>
<label for=m-docskitextutorialsadvanced-featurefieldmask-check><a href=/docs/kitex/tutorials/advanced-feature/fieldmask/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featurefieldmask><span>Serialize Data Ondemands</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featureprofiler-li><input type=checkbox id=m-docskitextutorialsadvanced-featureprofiler-check>
<label for=m-docskitextutorialsadvanced-featureprofiler-check><a href=/docs/kitex/tutorials/advanced-feature/profiler/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featureprofiler><span>Request Profiler</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsadvanced-featuremulti_service-li><input type=checkbox id=m-docskitextutorialsadvanced-featuremulti_service-check>
<label for=m-docskitextutorialsadvanced-featuremulti_service-check><a href=/docs/kitex/tutorials/advanced-feature/multi_service/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsadvanced-featuremulti_service><span>Multiple Services</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuremulti_servicemulti_service-li><input type=checkbox id=m-docskitextutorialsadvanced-featuremulti_servicemulti_service-check>
<label for=m-docskitextutorialsadvanced-featuremulti_servicemulti_service-check><a href=/docs/kitex/tutorials/advanced-feature/multi_service/multi_service/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuremulti_servicemulti_service><span>Multiple Services</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuremulti_servicemulti_handler-li><input type=checkbox id=m-docskitextutorialsadvanced-featuremulti_servicemulti_handler-check>
<label for=m-docskitextutorialsadvanced-featuremulti_servicemulti_handler-check><a href=/docs/kitex/tutorials/advanced-feature/multi_service/multi_handler/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuremulti_servicemulti_handler><span>Generating Multiple Handlers for Multiple Services</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsadvanced-featuregls-li><input type=checkbox id=m-docskitextutorialsadvanced-featuregls-check>
<label for=m-docskitextutorialsadvanced-featuregls-check><a href=/docs/kitex/tutorials/advanced-feature/gls/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsadvanced-featuregls><span>GLS Feature Usage</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialscode-gen-li><input type=checkbox id=m-docskitextutorialscode-gen-check>
<label for=m-docskitextutorialscode-gen-check><a href=/docs/kitex/tutorials/code-gen/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialscode-gen><span>Code Generation</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gencode_generation-li><input type=checkbox id=m-docskitextutorialscode-gencode_generation-check>
<label for=m-docskitextutorialscode-gencode_generation-check><a href=/docs/kitex/tutorials/code-gen/code_generation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gencode_generation><span>Code Generation Tool</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gencombine_service-li><input type=checkbox id=m-docskitextutorialscode-gencombine_service-check>
<label for=m-docskitextutorialscode-gencombine_service-check><a href=/docs/kitex/tutorials/code-gen/combine_service/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gencombine_service><span>Combine Service [DEPRECATED]</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genvalidator-li><input type=checkbox id=m-docskitextutorialscode-genvalidator-check>
<label for=m-docskitextutorialscode-genvalidator-check><a href=/docs/kitex/tutorials/code-gen/validator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genvalidator><span>Thrift Validator</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genfastpb-li><input type=checkbox id=m-docskitextutorialscode-genfastpb-check>
<label for=m-docskitextutorialscode-genfastpb-check><a href=/docs/kitex/tutorials/code-gen/fastpb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genfastpb><span>Fastpb</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gentemplate_extension-li><input type=checkbox id=m-docskitextutorialscode-gentemplate_extension-check>
<label for=m-docskitextutorialscode-gentemplate_extension-check><a href=/docs/kitex/tutorials/code-gen/template_extension/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gentemplate_extension><span>Extend the Templates of Service Generated Code</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genstruct_reference_generator-li><input type=checkbox id=m-docskitextutorialscode-genstruct_reference_generator-check>
<label for=m-docskitextutorialscode-genstruct_reference_generator-check><a href=/docs/kitex/tutorials/code-gen/struct_reference_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genstruct_reference_generator><span>Generate Structs Reference</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gencustom_tpl-li><input type=checkbox id=m-docskitextutorialscode-gencustom_tpl-check>
<label for=m-docskitextutorialscode-gencustom_tpl-check><a href=/docs/kitex/tutorials/code-gen/custom_tpl/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gencustom_tpl><span>Custom Scaffold Template</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genidl_trimmer-li><input type=checkbox id=m-docskitextutorialscode-genidl_trimmer-check>
<label for=m-docskitextutorialscode-genidl_trimmer-check><a href=/docs/kitex/tutorials/code-gen/idl_trimmer/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genidl_trimmer><span>Thriftgo IDL Trimmer</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genprotoc_validator-li><input type=checkbox id=m-docskitextutorialscode-genprotoc_validator-check>
<label for=m-docskitextutorialscode-genprotoc_validator-check><a href=/docs/kitex/tutorials/code-gen/protoc_validator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genprotoc_validator><span>Protoc Validator</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-gencustom_struct_tags-li><input type=checkbox id=m-docskitextutorialscode-gencustom_struct_tags-check>
<label for=m-docskitextutorialscode-gencustom_struct_tags-check><a href=/docs/kitex/tutorials/code-gen/custom_struct_tags/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-gencustom_struct_tags><span>Custom Struct Tags</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genskip_decoder-li><input type=checkbox id=m-docskitextutorialscode-genskip_decoder-check>
<label for=m-docskitextutorialscode-genskip_decoder-check><a href=/docs/kitex/tutorials/code-gen/skip_decoder/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genskip_decoder><span>SkipDecoder</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialscode-genprutal-li><input type=checkbox id=m-docskitextutorialscode-genprutal-check>
<label for=m-docskitextutorialscode-genprutal-check><a href=/docs/kitex/tutorials/code-gen/prutal/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialscode-genprutal><span>Prutal</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsframework-exten-li><input type=checkbox id=m-docskitextutorialsframework-exten-check>
<label for=m-docskitextutorialsframework-exten-check><a href=/docs/kitex/tutorials/framework-exten/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsframework-exten><span>Framework Extension</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenmiddleware-li><input type=checkbox id=m-docskitextutorialsframework-extenmiddleware-check>
<label for=m-docskitextutorialsframework-extenmiddleware-check><a href=/docs/kitex/tutorials/framework-exten/middleware/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenmiddleware><span>Middleware Extensions</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extensuite-li><input type=checkbox id=m-docskitextutorialsframework-extensuite-check>
<label for=m-docskitextutorialsframework-extensuite-check><a href=/docs/kitex/tutorials/framework-exten/suite/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extensuite><span>Suite Extensions</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenregistry-li><input type=checkbox id=m-docskitextutorialsframework-extenregistry-check>
<label for=m-docskitextutorialsframework-extenregistry-check><a href=/docs/kitex/tutorials/framework-exten/registry/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenregistry><span>Extension of Service Registry</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenservice_discovery-li><input type=checkbox id=m-docskitextutorialsframework-extenservice_discovery-check>
<label for=m-docskitextutorialsframework-extenservice_discovery-check><a href=/docs/kitex/tutorials/framework-exten/service_discovery/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenservice_discovery><span>Service Discovery Extension</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenloadbalance-li><input type=checkbox id=m-docskitextutorialsframework-extenloadbalance-check>
<label for=m-docskitextutorialsframework-extenloadbalance-check><a href=/docs/kitex/tutorials/framework-exten/loadbalance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenloadbalance><span>Customize LoadBalancer</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenmonitoring-li><input type=checkbox id=m-docskitextutorialsframework-extenmonitoring-check>
<label for=m-docskitextutorialsframework-extenmonitoring-check><a href=/docs/kitex/tutorials/framework-exten/monitoring/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenmonitoring><span>Monitoring Extension</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extencodec-li><input type=checkbox id=m-docskitextutorialsframework-extencodec-check>
<label for=m-docskitextutorialsframework-extencodec-check><a href=/docs/kitex/tutorials/framework-exten/codec/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extencodec><span>Extension of Codec</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extentransport-li><input type=checkbox id=m-docskitextutorialsframework-extentransport-check>
<label for=m-docskitextutorialsframework-extentransport-check><a href=/docs/kitex/tutorials/framework-exten/transport/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extentransport><span>Extension of Transport Module</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extentrans_pipeline-li><input type=checkbox id=m-docskitextutorialsframework-extentrans_pipeline-check>
<label for=m-docskitextutorialsframework-extentrans_pipeline-check><a href=/docs/kitex/tutorials/framework-exten/trans_pipeline/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extentrans_pipeline><span>Extension of Transport Pipeline-Bound</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extentransmeta-li><input type=checkbox id=m-docskitextutorialsframework-extentransmeta-check>
<label for=m-docskitextutorialsframework-extentransmeta-check><a href=/docs/kitex/tutorials/framework-exten/transmeta/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extentransmeta><span>Extension of Metadata Transparent Transmission</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extendiagnosis-li><input type=checkbox id=m-docskitextutorialsframework-extendiagnosis-check>
<label for=m-docskitextutorialsframework-extendiagnosis-check><a href=/docs/kitex/tutorials/framework-exten/diagnosis/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extendiagnosis><span>Extension of Diagnosis</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsframework-extenimplemented_extension-li><input type=checkbox id=m-docskitextutorialsframework-extenimplemented_extension-check>
<label for=m-docskitextutorialsframework-extenimplemented_extension-check><a href=/docs/kitex/tutorials/framework-exten/implemented_extension/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsframework-extenimplemented_extension><span>Implemented Extension</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsoptions-li><input type=checkbox id=m-docskitextutorialsoptions-check>
<label for=m-docskitextutorialsoptions-check><a href=/docs/kitex/tutorials/options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsoptions><span>Option</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsoptionsclient_options-li><input type=checkbox id=m-docskitextutorialsoptionsclient_options-check>
<label for=m-docskitextutorialsoptionsclient_options-check><a href=/docs/kitex/tutorials/options/client_options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsoptionsclient_options><span>Client Option</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsoptionsserver_options-li><input type=checkbox id=m-docskitextutorialsoptionsserver_options-check>
<label for=m-docskitextutorialsoptionsserver_options-check><a href=/docs/kitex/tutorials/options/server_options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsoptionsserver_options><span>Server Option</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsoptionscall_options-li><input type=checkbox id=m-docskitextutorialsoptionscall_options-check>
<label for=m-docskitextutorialsoptionscall_options-check><a href=/docs/kitex/tutorials/options/call_options/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsoptionscall_options><span>Call Option</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsthird-party-li><input type=checkbox id=m-docskitextutorialsthird-party-check>
<label for=m-docskitextutorialsthird-party-check><a href=/docs/kitex/tutorials/third-party/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsthird-party><span>Third-Party</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsthird-partyservice_discovery-li><input type=checkbox id=m-docskitextutorialsthird-partyservice_discovery-check>
<label for=m-docskitextutorialsthird-partyservice_discovery-check><a href=/docs/kitex/tutorials/third-party/service_discovery/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsthird-partyservice_discovery><span>Service Discovery</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyservice_discoveryetcd-li><input type=checkbox id=m-docskitextutorialsthird-partyservice_discoveryetcd-check>
<label for=m-docskitextutorialsthird-partyservice_discoveryetcd-check><a href=/docs/kitex/tutorials/third-party/service_discovery/etcd/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyservice_discoveryetcd><span>Etcd</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyservice_discoveryconsul-li><input type=checkbox id=m-docskitextutorialsthird-partyservice_discoveryconsul-check>
<label for=m-docskitextutorialsthird-partyservice_discoveryconsul-check><a href=/docs/kitex/tutorials/third-party/service_discovery/consul/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyservice_discoveryconsul><span>Consul</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyservice_discoveryeureka-li><input type=checkbox id=m-docskitextutorialsthird-partyservice_discoveryeureka-check>
<label for=m-docskitextutorialsthird-partyservice_discoveryeureka-check><a href=/docs/kitex/tutorials/third-party/service_discovery/eureka/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyservice_discoveryeureka><span>Eureka</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyservice_discoverynacos-li><input type=checkbox id=m-docskitextutorialsthird-partyservice_discoverynacos-check>
<label for=m-docskitextutorialsthird-partyservice_discoverynacos-check><a href=/docs/kitex/tutorials/third-party/service_discovery/nacos/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyservice_discoverynacos><span>Nacos</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyservice_discoverypolaris-li><input type=checkbox id=m-docskitextutorialsthird-partyservice_discoverypolaris-check>
<label for=m-docskitextutorialsthird-partyservice_discoverypolaris-check><a href=/docs/kitex/tutorials/third-party/service_discovery/polaris/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyservice_discoverypolaris><span>Polaris</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyservice_discoveryservice-comb-li><input type=checkbox id=m-docskitextutorialsthird-partyservice_discoveryservice-comb-check>
<label for=m-docskitextutorialsthird-partyservice_discoveryservice-comb-check><a href=/docs/kitex/tutorials/third-party/service_discovery/service-comb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyservice_discoveryservice-comb><span>ServiceComb</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyservice_discoveryzookeeper-li><input type=checkbox id=m-docskitextutorialsthird-partyservice_discoveryzookeeper-check>
<label for=m-docskitextutorialsthird-partyservice_discoveryzookeeper-check><a href=/docs/kitex/tutorials/third-party/service_discovery/zookeeper/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyservice_discoveryzookeeper><span>Zookeeper</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyservice_discoverydns-li><input type=checkbox id=m-docskitextutorialsthird-partyservice_discoverydns-check>
<label for=m-docskitextutorialsthird-partyservice_discoverydns-check><a href=/docs/kitex/tutorials/third-party/service_discovery/dns/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyservice_discoverydns><span>DNS</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyservice_discoveryrule-based-li><input type=checkbox id=m-docskitextutorialsthird-partyservice_discoveryrule-based-check>
<label for=m-docskitextutorialsthird-partyservice_discoveryrule-based-check><a href=/docs/kitex/tutorials/third-party/service_discovery/rule-based/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyservice_discoveryrule-based><span>Service Filtering</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialsthird-partyconfig-center-li><input type=checkbox id=m-docskitextutorialsthird-partyconfig-center-check>
<label for=m-docskitextutorialsthird-partyconfig-center-check><a href=/docs/kitex/tutorials/third-party/config-center/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialsthird-partyconfig-center><span>ConfigCenter</span></a></label><ul class="ul-5 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyconfig-centeretcd-li><input type=checkbox id=m-docskitextutorialsthird-partyconfig-centeretcd-check>
<label for=m-docskitextutorialsthird-partyconfig-centeretcd-check><a href=/docs/kitex/tutorials/third-party/config-center/etcd/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyconfig-centeretcd><span>Etcd</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyconfig-centerapollo-li><input type=checkbox id=m-docskitextutorialsthird-partyconfig-centerapollo-check>
<label for=m-docskitextutorialsthird-partyconfig-centerapollo-check><a href=/docs/kitex/tutorials/third-party/config-center/apollo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyconfig-centerapollo><span>Apollo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyconfig-centernacos-li><input type=checkbox id=m-docskitextutorialsthird-partyconfig-centernacos-check>
<label for=m-docskitextutorialsthird-partyconfig-centernacos-check><a href=/docs/kitex/tutorials/third-party/config-center/nacos/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyconfig-centernacos><span>Nacos</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyconfig-centerfile-li><input type=checkbox id=m-docskitextutorialsthird-partyconfig-centerfile-check>
<label for=m-docskitextutorialsthird-partyconfig-centerfile-check><a href=/docs/kitex/tutorials/third-party/config-center/file/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyconfig-centerfile><span>File</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyconfig-centerzookeeper-li><input type=checkbox id=m-docskitextutorialsthird-partyconfig-centerzookeeper-check>
<label for=m-docskitextutorialsthird-partyconfig-centerzookeeper-check><a href=/docs/kitex/tutorials/third-party/config-center/zookeeper/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyconfig-centerzookeeper><span>Zookeeper</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyconfig-centerconsul-li><input type=checkbox id=m-docskitextutorialsthird-partyconfig-centerconsul-check>
<label for=m-docskitextutorialsthird-partyconfig-centerconsul-check><a href=/docs/kitex/tutorials/third-party/config-center/consul/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyconfig-centerconsul><span>Consul</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialsthird-partyobservability-li><input type=checkbox id=m-docskitextutorialsthird-partyobservability-check>
<label for=m-docskitextutorialsthird-partyobservability-check><a href=/docs/kitex/tutorials/third-party/observability/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialsthird-partyobservability><span>Observability</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitextutorialstool-li><input type=checkbox id=m-docskitextutorialstool-check>
<label for=m-docskitextutorialstool-check><a href=/docs/kitex/tutorials/tool/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitextutorialstool><span>Tool</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitextutorialstoolkitexcall-li><input type=checkbox id=m-docskitextutorialstoolkitexcall-check>
<label for=m-docskitextutorialstoolkitexcall-check><a href=/docs/kitex/tutorials/tool/kitexcall/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitextutorialstoolkitexcall><span>kitexcall: the CLI tool for sending RPC call in JSON format</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitexreference-li><input type=checkbox id=m-docskitexreference-check checked>
<label for=m-docskitexreference-check><a href=/docs/kitex/reference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexreference><span>Reference</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexreferencetransport_protocol_ttheader-li><input type=checkbox id=m-docskitexreferencetransport_protocol_ttheader-check>
<label for=m-docskitexreferencetransport_protocol_ttheader-check><a href=/docs/kitex/reference/transport_protocol_ttheader/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexreferencetransport_protocol_ttheader><span>TTHeader</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexreferenceexception-li><input type=checkbox id=m-docskitexreferenceexception-check>
<label for=m-docskitexreferenceexception-check><a href=/docs/kitex/reference/exception/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexreferenceexception><span>Exception Instruction</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexreferenceversion-li><input type=checkbox id=m-docskitexreferenceversion-check>
<label for=m-docskitexreferenceversion-check><a href=/docs/kitex/reference/version/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexreferenceversion><span>Version Specification</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitexbest-practice-li><input type=checkbox id=m-docskitexbest-practice-check checked>
<label for=m-docskitexbest-practice-check><a href=/docs/kitex/best-practice/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexbest-practice><span>Best Practice</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexbest-practiceusage_attention-li><input type=checkbox id=m-docskitexbest-practiceusage_attention-check>
<label for=m-docskitexbest-practiceusage_attention-check><a href=/docs/kitex/best-practice/usage_attention/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexbest-practiceusage_attention><span>Usage Attention</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexbest-practicegraceful_shutdown-li><input type=checkbox id=m-docskitexbest-practicegraceful_shutdown-check>
<label for=m-docskitexbest-practicegraceful_shutdown-check><a href=/docs/kitex/best-practice/graceful_shutdown/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexbest-practicegraceful_shutdown><span>Graceful Shutdown</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexbest-practiceerror_handle-li><input type=checkbox id=m-docskitexbest-practiceerror_handle-check>
<label for=m-docskitexbest-practiceerror_handle-check><a href=/docs/kitex/best-practice/error_handle/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexbest-practiceerror_handle><span>Error Handle</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexbest-practiceremove_apache_codec-li><input type=checkbox id=m-docskitexbest-practiceremove_apache_codec-check>
<label for=m-docskitexbest-practiceremove_apache_codec-check><a href=/docs/kitex/best-practice/remove_apache_codec/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexbest-practiceremove_apache_codec><span>Kitex Remove Apache Thrift User Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitexbest-practiceintegration-testing-li><input type=checkbox id=m-docskitexbest-practiceintegration-testing-check>
<label for=m-docskitexbest-practiceintegration-testing-check><a href=/docs/kitex/best-practice/integration-testing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexbest-practiceintegration-testing><span>Integration Testing</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexbest-practiceintegration-testingmock_client-li><input type=checkbox id=m-docskitexbest-practiceintegration-testingmock_client-check>
<label for=m-docskitexbest-practiceintegration-testingmock_client-check><a href=/docs/kitex/best-practice/integration-testing/mock_client/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexbest-practiceintegration-testingmock_client><span>How To Mock A Kitex Client</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexbest-practiceintegration-testingdebug_efficiently-li><input type=checkbox id=m-docskitexbest-practiceintegration-testingdebug_efficiently-check>
<label for=m-docskitexbest-practiceintegration-testingdebug_efficiently-check><a href=/docs/kitex/best-practice/integration-testing/debug_efficiently/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexbest-practiceintegration-testingdebug_efficiently><span>Debug Efficiently</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docskitexbest-practiceself_check-li><input type=checkbox id=m-docskitexbest-practiceself_check-check>
<label for=m-docskitexbest-practiceself_check-check><a href=/docs/kitex/best-practice/self_check/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexbest-practiceself_check><span>Self Troubleshooting Guide</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexbest-practiceself_checkpanic_self_check-li><input type=checkbox id=m-docskitexbest-practiceself_checkpanic_self_check-check>
<label for=m-docskitexbest-practiceself_checkpanic_self_check-check><a href=/docs/kitex/best-practice/self_check/panic_self_check/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexbest-practiceself_checkpanic_self_check><span>Panic Self-check Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexbest-practiceself_checkmem_leak_self_check-li><input type=checkbox id=m-docskitexbest-practiceself_checkmem_leak_self_check-check>
<label for=m-docskitexbest-practiceself_checkmem_leak_self_check-check><a href=/docs/kitex/best-practice/self_check/mem_leak_self_check/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexbest-practiceself_checkmem_leak_self_check><span>Memory Leak Self-Check Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexbest-practiceself_checkfast_write_read_panic-li><input type=checkbox id=m-docskitexbest-practiceself_checkfast_write_read_panic-check>
<label for=m-docskitexbest-practiceself_checkfast_write_read_panic-check><a href=/docs/kitex/best-practice/self_check/fast_write_read_panic/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docskitexbest-practiceself_checkfast_write_read_panic><span>FastWrite/FastRead Panic Error</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docskitexfaq-li><input type=checkbox id=m-docskitexfaq-check checked>
<label for=m-docskitexfaq-check><a href=/docs/kitex/faq/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docskitexfaq><span>FAQ</span></a></label></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cloudwego/cloudwego.github.io/edit/main/content/en/docs/kitex/Tutorials/advanced-feature/generic-call/basic_usage.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/new/main/content/en/docs/kitex/Tutorials/advanced-feature/generic-call?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/issues/new?title=Basic%20Usage" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/cloudwego/kitex/issues/new/choose class="td-page-meta--project td-page-meta__project-issue" target=_blank rel=noopener><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#what-is-generic-call>What is Generic Call?</a></li><li><a href=#supported-scenarios>Supported Scenarios</a></li><li><a href=#usage-examples>Usage Examples</a><ul><li><a href=#idlprovider>IDLProvider</a></li><li><a href=#thrift-binary-stream-forwarding>Thrift Binary Stream Forwarding</a></li><li><a href=#http-mapping-generic-call>HTTP-Mapping Generic Call</a></li><li><a href=#protobuf-binary-generic-call>Protobuf Binary Generic Call</a></li><li><a href=#map-mapping-generic-call>Map-Mapping Generic Call</a></li><li><a href=#json-mapping-generic-call>JSON-Mapping Generic Call</a></li></ul></li><li><a href=#performance-benchmark-comparison>Performance Benchmark Comparison</a></li><li><a href=#faq>FAQ</a><ul><li><a href=#q-is-it-necessary-to-reference-the-idl-for-generic-calls>Q: Is it necessary to reference the IDL for generic calls?</a></li><li><a href=#q-will-the-framework-do-corresponding-metrics-reporting-when-using-binary-stream-forwarding>Q: Will the framework do corresponding metrics reporting when using binary stream forwarding?</a></li><li><a href=#q-missing-version-in-thrift-message>Q: &ldquo;missing version in Thrift Message&rdquo;</a></li><li><a href=#q-is-protobuf-supported>Q: Is protobuf supported?</a></li><li><a href=#q-does-generic-call-support-default-values-defined-in-the-idl>Q: Does generic call support default values defined in the idl?</a></li><li><a href=#q-the-generated-type-for-a-field-modified-with-optional-has-a-pointer-does-the-value-in-map-generic-also-need-to-be-a-pointer>Q: The generated type for a field modified with optional has a pointer. Does the value in map generic also need to be a pointer?</a></li><li><a href=#q-there-are-multiple-services-defined-in-the-idl-file-how-to-handle-this-in-generic-calls>Q: There are multiple services defined in the idl file. How to handle this in generic calls?</a></li><li><a href=#q-server-error-readstring-the-string-size-greater-than-buf-length>Q: Server error &ldquo;[ReadString] the string size greater than buf length&rdquo;</a></li><li><a href=#q-map-generic-call-byte-type-field-panics-in-writeint8-function>Q: map generic call byte type field panics in writeInt8 function</a></li><li><a href=#q-binary-generic-server-invalid-trans-buffer-in-binarythriftcodec-unmarshal->Q: binary generic-server: &ldquo;invalid trans buffer in binaryThriftCodec Unmarshal&rdquo; ?</a></li><li><a href=#q-how-to-inject-different-generic-implementations-for-different-idl-services-under-one-server>Q: How to inject different generic implementations for different idl services under one server?</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/>Documentation</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/kitex/>Kitex</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/kitex/tutorials/>Tutorials</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/kitex/tutorials/advanced-feature/>Advanced Feature</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/kitex/tutorials/advanced-feature/generic-call/>Generic Call</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://www.cloudwego.io/docs/kitex/tutorials/advanced-feature/generic-call/basic_usage/>Basic Usage</a></li></ol></nav><div class=td-content><h1>Basic Usage</h1><div class=lead>Basic usage of generic call</div><header class=article-meta></header><blockquote><p>For stream calls, please upgrade <strong>github.com/cloudwego/kitex</strong> to >= v0.14.1</p></blockquote><h2 id=what-is-generic-call>What is Generic Call?</h2><p>In a standard Kitex Client -> Kitex Server request, the business code can directly construct a Go struct (the method&rsquo;s Request), call the corresponding method of the Kitex Client, perform serialization within the method, and then send it to the Server.</p><p>In some scenarios, the business code might receive:</p><ul><li><p>Already encoded binary data (e.g., in a proxy)</p><ul><li>The data needs to be directly forwarded to the target Server without being decoded and reconstructed.</li></ul></li><li><p>HTTP Request, Go map, or JSON (e.g., in an ApiGateway)</p><ul><li>The binary data resulting from the serialization of this data needs to be sent to the target Server.</li></ul></li></ul><p>In these scenarios, there may be multiple target downstream services/methods, and it is impossible (or unsuitable) for the business code to construct a Go struct for each piece of data. Therefore, Kitex&rsquo;s generic call capability is needed.</p><h2 id=supported-scenarios>Supported Scenarios</h2><ol><li>Thrift Binary Forwarding: For traffic forwarding scenarios (non-streaming only).</li><li>HTTP-Mapping Generic Call: For API gateway scenarios (non-streaming only).</li><li>Protobuf Binary Generic Call (supports streaming and non-streaming).</li><li>Map-Thrift Mapping Generic Call (supports streaming and non-streaming).</li><li>JSON-Mapping Generic Call (supports streaming and non-streaming, and supports mapping to thrift / protobuf).</li></ol><h2 id=usage-examples>Usage Examples</h2><h3 id=idlprovider>IDLProvider</h3><p>Generic calls require a runtime descriptor from the IDL, which is provided by an <code>IDLProvider</code>. Kitex currently offers two <code>IDLProvider</code> implementations.</p><h4 id=parsing-local-files>Parsing Local Files</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic&#34;</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span> <span style=color:#8f5902;font-style:italic>// equals to `kitex -I /idl ./Your_IDL_File_Path`</span>
</span></span><span style=display:flex><span> <span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewThriftFileProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;./Your_IDL_File_Path&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;/idl&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>     <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span> <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=parsing-in-memory-content-update-cloudwegokitex--v0130>Parsing In-Memory Content (update cloudwego/kitex >= v0.13.0)</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// equals to `kitex -I . a/a.thrift`</span>
</span></span><span style=display:flex><span><span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>NewThriftContentWithAbsIncludePathProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;a/a.thrift&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;a/a.thrift&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>`include &#34;../b/b.thrift&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>                      namespace go a.b.c`</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;b/b.thrift&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;namespace go a.b.c&#34;</span><span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>err</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>p</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>UpdateIDL</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;a/a.thrift&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;a/a.thrift&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>`include &#34;b/b.thrift&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>                      namespace go a.b.c`</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;b/b.thrift&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;namespace go a.b.c&#34;</span><span style=color:#000;font-weight:700>})</span>
</span></span></code></pre></div><p>The first argument of <code>NewThriftContentWithAbsIncludePathProvider</code> is the main IDL filename, and the second is a map from filenames to their content. This interface first tries to find included files using relative paths based on the main IDL file. If not found, it then uses absolute paths (i.e., directly looking up the IDL content using the filename as the key, as shown in <code>UpdateIDL</code>).</p><h4 id=testcase>Testcase</h4><p>Test case: <a href=https://github.com/cloudwego/kitex/blob/develop/pkg/generic/thriftidl_provider_test.go>https://github.com/cloudwego/kitex/blob/develop/pkg/generic/thriftidl_provider_test.go</a></p><h3 id=thrift-binary-stream-forwarding>Thrift Binary Stream Forwarding</h3><p>This requires users to encode the data themselves or to forward message packets in traffic forwarding scenarios. Binary generic calls only support Framed or TTHeader requests, not Buffered Binary.</p><p>Note: Oneway methods are not supported.</p><h4 id=client-side-usage>Client-side Usage</h4><ol><li>Initialize the Client</li></ol><p>Note: <strong>Do not</strong> create a new Client for each request (as each client consumes extra resources). It is recommended to create one client for each downstream service when the process starts, or use a Client Pool indexed by the downstream service.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>   <span style=color:#000>genericclient</span> <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/client/genericclient&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>NewGenericClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>service</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>genericclient</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Client</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericclient</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>service</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BinaryThriftGeneric</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// ...</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>genericCli</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><ol start=2><li>Generic Call</li></ol><p>For usage, refer to <a href=https://github.com/cloudwego/kitex/blob/develop/pkg/generic/binary_test/generic_test.go#L117>https://github.com/cloudwego/kitex/blob/develop/pkg/generic/binary_test/generic_test.go#L117</a></p><p>Note:</p><ul><li>The binary encoding is not performed on the original Thrift request parameters (e.g., <a href=https://github.com/cloudwego/kitex-examples/blob/v0.2.0/hello/kitex_gen/api/hello.go#L12>api.Request</a>), but on the <strong>KitexArgs</strong> that wrap the method parameters (also a struct generated from the IDL under <code>kitex_gen</code>, e.g., <a href=https://github.com/cloudwego/kitex-examples/blob/v0.2.0/hello/kitex_gen/api/hello.go#L461>api.HelloEchoArgs</a>).</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/utils&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>gopkg</span> <span style=color:#4e9a06>&#34;github.com/cloudwego/gopkg/protocol/thrift&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// The following uses the thrift codec package provided by kitex to construct an encoded Thrift binary ([]byte)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// It must conform to the Thrift encoding format [thrift/thrift-binary-protocol.md](https://github.com/apache/thrift/blob/master/doc/specs/thrift-binary-protocol.md#message)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Construct a request parameter MethodArgs</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Note: This is a type generated under kitex_gen.MethodArgs wraps MethodReq. [Click here](https://github.com/cloudwego/kitex-examples/blob/v0.2.2/hello/kitex_gen/api/hello.go#L461) for an example.</span>
</span></span><span style=display:flex><span><span style=color:#000>args</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>HelloEchoArgs</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Req</span><span style=color:#000;font-weight:700>:</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>Request</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>Message</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;hello&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>buf</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>byte</span>
</span></span><span style=display:flex><span><span style=color:#000>buf</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>gopkg</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MarshalFastMsg</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>methodName</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>gopkg</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>CALL</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic>/*seqID*/</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// The code above is for demonstration purposes only on how to get a Thrift Binary</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// The actual scenario for binary generic calls is often to receive the Thrift Binary directly</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// After obtaining the encoded Thrift binary in some way, directly call the generic Client to request the downstream service</span>
</span></span><span style=display:flex><span><span style=color:#000>result</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GenericCall</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>methodName</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>buf</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Note:</p><ol><li><code>seqID</code> is the request sequence number. The <code>SeqID</code> set by the user here will not take effect; the framework will generate and reset it, so you can just write 0. In server-side scenarios, you need to set the <code>seqID</code> actively, see the server-side section for details.</li><li>The apparent type of the returned <code>result</code> is <code>interface{}</code>, but its actual type is <code>[]uint8</code>, which is the Thrift payload from the server response. It can be decoded into a <code>KitexResult</code> type.</li></ol><h4 id=server-side-usage-if-needed>Server-side Usage (if needed)</h4><ol><li><p>The server is used for services that only do traffic forwarding.</p><ul><li>The upstream client for binary generic calls and the downstream server <strong>do not need to be paired</strong>. A binary generic server can accept normal Thrift requests, but the protocol must be Framed or TTHeader; <strong>Buffered Binary is not supported</strong>.<ul><li>Reason: Binary generic calls do not decode the Thrift packet, so a protocol with a header is needed for processing.</li></ul></li><li>If the client passes a <strong>correctly thrift-encoded binary</strong>, it can access a normal Thrift server.</li></ul></li><li><p>Pay attention to the usage in the following scenario:
Scenario: normal client -> [generic server -> generic client] -> normal server. You need to ensure that the <code>seqID</code> of the packet returned by the generic server to the upstream is consistent, otherwise it will cause an error on the upstream side.</p><p><strong>Solution</strong>: Get the upstream <code>seqID</code> via <code>generic.GetSeqID(buff)</code>. When the generic server receives the <code>buff</code> returned from the generic client, reset the <code>seqID</code> of the data packet returned to the upstream using <code>generic.SetSeqID(seqID, transBuff)</code>.</p></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>bgeneric</span> <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/server/genericserver&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>genericCli</span> <span style=color:#000>genericclient</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Client</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>genericCli</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>NewGenericClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;targetServiceName&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>g</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BinaryThriftGeneric</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#000>svr</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>bgeneric</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewServer</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>GenericServiceImpl</span><span style=color:#000;font-weight:700>{},</span> <span style=color:#000>g</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>svr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Run</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>GenericServiceImpl</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// GenericCall ...</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>g</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>GenericServiceImpl</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>GenericCall</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>method</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>request</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{},</span> <span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// For thrift protocol binary format, refer to: [thrift/thrift-binary-protocol.md](https://github.com/apache/thrift/blob/master/doc/specs/thrift-binary-protocol.md#message)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>reqBuf</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>.([]</span><span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// The method name is already parsed</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// e.g. </span>
</span></span><span style=display:flex><span>    <span style=color:#000>seqID</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetSeqID</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>reqBuf</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// Theoretically impossible, the request packet is invalid</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// If it&#39;s a proxy scenario - request the target downstream</span>
</span></span><span style=display:flex><span>    <span style=color:#000>respBuf</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GenericCall</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>methodName</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>reqBuf</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Execute handler logic</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Construct a respBuf: 1. Serialize the downstream response 2. // It can also be the response from a binary generic call, satisfying the &#34;request passthrough&#34; requirement</span>
</span></span><span style=display:flex><span>    <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetSeqID</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>seqID</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>respBuf</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>respBuf</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>NewGenericClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>service</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>genericclient</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Client</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericclient</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>service</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BinaryThriftGeneric</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// ...</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>genericCli</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=http-mapping-generic-call>HTTP-Mapping Generic Call</h3><p>Note:</p><ol><li>Only the generic client is supported, which converts an HTTP Request into a Thrift request and sends it, while also converting the downstream Thrift response into an HTTP Response.</li><li>Kitex has supported a higher-performance implementation of generic calls. For usage, see <a href=https://www.cloudwego.io/zh/docs/kitex/tutorials/advanced-feature/generic-call/generic-call-dynamicgo/>Guide to Accessing dynamicgo for Generic Calls</a>.</li></ol><h4 id=generic-call-example-json-data-format>Generic Call Example (JSON data format)</h4><p><code>YOUR_IDL.thrift</code></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-thrift data-lang=thrift><span style=display:flex><span><span style=color:#204a87;font-weight:700>namespace</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>go</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ReqItem</span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>id</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>go.tag</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;json:</span><span style=color:#4e9a06>\&#34;</span><span style=color:#4e9a06>id</span><span style=color:#4e9a06>\&#34;</span><span style=color:#4e9a06>&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>text</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BizRequest</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>v_int64</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.query</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;v_int64&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>api.vd</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;$&gt;0&amp;&amp;$&lt;200&#34;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>text</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.body</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;text&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i32</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>token</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.header</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;token&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ReqItem</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>req_items_map</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.body</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;req_items_map&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ReqItem</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>some</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.body</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;some&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>list</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>req_items</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.query</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;req_items&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i32</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>api_version</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.path</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;action&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>uid</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.path</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;biz&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>list</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>cids</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.query</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;cids&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>list</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>vids</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.query</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;vids&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>RspItem</span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>item_id</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>text</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BizResponse</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>T</span>                             <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.header</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;T&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> 
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>RspItem</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>rsp_items</span>           <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.body</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;rsp_items&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i32</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>v_enum</span>                       <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.none</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>list</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>RspItem</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>rsp_item_list</span>            <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.body</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;rsp_item_list&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i32</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>http_code</span>                         <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.http_code</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> 
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>list</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>item_count</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.header</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;item_count&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>service</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BizService</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>BizResponse</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BizMethod1</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BizRequest</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>req</span><span style=color:#000;font-weight:700>)(</span><span style=color:#000>api.get</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;/life/client/:action/:biz&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>api.baseurl</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;ib.snssdk.com&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>api.param</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;true&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>BizResponse</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BizMethod2</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BizRequest</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>req</span><span style=color:#000;font-weight:700>)(</span><span style=color:#000>api.post</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;/life/client/:action/:biz&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>api.baseurl</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;ib.snssdk.com&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>api.param</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;true&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>api.serializer</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;form&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>BizResponse</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BizMethod3</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BizRequest</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>req</span><span style=color:#000;font-weight:700>)(</span><span style=color:#000>api.post</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;/life/client/:action/:biz/other&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>api.baseurl</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;ib.snssdk.com&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>api.param</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;true&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>api.serializer</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;json&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><ul><li>Request</li></ul><p>Type: *generic.HTTPRequest</p><ul><li>Response</li></ul><p>Type: *generic.HTTPResponse</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>bgeneric</span> <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/client/genericclient&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Parse local IDL file</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// YOUR_IDL_PATH thrift file path: e.g., ./idl/example.thrift</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// includeDirs: specify include paths, defaults to using relative paths from the current file to find includes</span>
</span></span><span style=display:flex><span>    <span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewThriftFileProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;./YOUR_IDL_PATH&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Construct an HTTP-type generic call</span>
</span></span><span style=display:flex><span>    <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HTTPThriftGeneric</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>cli</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>bgeneric</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;service&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>opts</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Construct a request</span>
</span></span><span style=display:flex><span>    <span style=color:#000>body</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;some&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span>
</span></span><span style=display:flex><span>                        <span style=color:#4e9a06>&#34;id&#34;</span><span style=color:#000;font-weight:700>:</span>   <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                        <span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;req_items_map&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span>
</span></span><span style=display:flex><span>                        <span style=color:#4e9a06>&#34;1&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span>
</span></span><span style=display:flex><span>                                <span style=color:#4e9a06>&#34;id&#34;</span><span style=color:#000;font-weight:700>:</span>   <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                                <span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;text&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                        <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>data</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>json</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Marshal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>url</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#4e9a06>&#34;http://example.com/life/client/1/1?v_int64=1&amp;req_items=item1,item2,itme3&amp;cids=1,2,3&amp;vids=1,2,3&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>req</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewRequest</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MethodGet</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>url</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>bytes</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewBuffer</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>data</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>req</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Header</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Set</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;token&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;1&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>customReq</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FromHTTPRequest</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>req</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>// Considering that the business might use a third-party http request, you can construct a conversion function yourself</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// customReq *generic.HTTPRequest</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Since the method for http generic call is obtained from the http request through bam rules, just leave it empty</span>
</span></span><span style=display:flex><span>    <span style=color:#000>resp</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>cli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GenericCall</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>customReq</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>realResp</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>resp</span><span style=color:#000;font-weight:700>.(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HTTPResponse</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>realResp</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Write</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>w</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>// Write back to ResponseWriter, for http gateway</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=generic-call-example-protobuf-data-format>Generic Call Example (Protobuf data format)</h4><p>For usage, refer to: <a href=https://github.com/cloudwego/kitex/pull/638/files#diff-bd83f811aba6a67986c66e48a85a0566579ab64757ea75ba8f9a39dcb363d1d5>https://github.com/cloudwego/kitex/pull/638/files#diff-bd83f811aba6a67986c66e48a85a0566579ab64757ea75ba8f9a39dcb363d1d5</a></p><p><strong>Note the following points:</strong></p><ol><li>Fields in the thrift struct modified with <code>api.body</code> must correspond one-to-one with the field IDs in the proto file; other fields are not mapped to proto and have no requirements.</li><li>Nesting structs in thrift IDL default values is not supported.</li><li>The method corresponding to thrift in the proto file must have the same name.</li></ol><p>An example of an extended annotation is adding <code>api.source='not_body_struct'</code>, which indicates that a certain field itself does not have a mapping to an HTTP request field, and it is necessary to traverse its subfields to get the corresponding value from the HTTP request. The usage is as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-thrift data-lang=thrift><span style=display:flex><span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Request</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>v_int64</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.query</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;v_int64&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>CommonParam</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>common_param</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.source</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;not_body_struct&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>CommonParam</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>api_version</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.query</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;api_version&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i32</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>token</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#000>api.header</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;token&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>The extension method is as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>init</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>descriptor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>RegisterAnnotation</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>apiNotBodyStruct</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// Implement descriptor.Annotation</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>apiNotBodyStruct</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>apiNotBodyStruct</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Equal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>key</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;api.source&#34;</span> <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#000>value</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;not_body_struct&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>apiNotBodyStruct</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Handle</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>newNotBodyStruct</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>notBodyStruct</span> <span style=color:#204a87;font-weight:700>struct</span><span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>newNotBodyStruct</span> <span style=color:#000>descriptor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewHTTPMapping</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>func</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>value</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>descriptor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HTTPMapping</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>notBodyStruct</span><span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// get value from request</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>notBodyStruct</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Request</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>req</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>descriptor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HTTPRequest</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>field</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>descriptor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FieldDescriptor</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{},</span> <span style=color:#204a87;font-weight:700>bool</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// The role of the not_body_struct annotation is equivalent to &#34;step into&#34;, so return req itself to let the current field continue to query the required value from the Request</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>req</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>true</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// set value to response</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>notBodyStruct</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Response</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>resp</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>descriptor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HTTPResponse</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>field</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>descriptor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>FieldDescriptor</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>val</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=protobuf-binary-generic-call>Protobuf Binary Generic Call</h3><p>Protobuf binary generic calls support both streaming and non-streaming calls, currently only for client-side use, and require <code>cloudwego/kitex >= v0.14.1</code>.</p><h4 id=client-side-usage-1>Client-side Usage</h4><ol><li>Initialize the Client</li></ol><p>Note: <strong>Do not</strong> create a new Client for each request (as each client consumes extra resources). It is recommended to create one client for each downstream service when the process starts, or use a Client Pool indexed by the downstream service.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>   <span style=color:#000>genericclient</span> <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/client/genericclient&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>NewGenericClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>service</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>genericclient</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Client</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>g</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BinaryPbGeneric</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>serviceName</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>packageName</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericclient</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>service</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BinaryThriftGeneric</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// ...</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>genericCli</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>Here <code>serviceName</code> and <code>packageName</code> correspond to the service name and package name defined in the IDL, such as <code>"Mock"</code> and <code>"protobuf/pbapi"</code> in the following pb idl.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-protobuf data-lang=protobuf><span style=display:flex><span><span style=color:#000>syntax</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;proto3&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>pbapi</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>go_package</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;protobuf/pbapi&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MockReq</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#204a87;font-weight:700>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MockResp</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#204a87;font-weight:700>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>service</span> <span style=color:#000>Mock</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>UnaryTest</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>MockReq</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>MockResp</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>ClientStreamingTest</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>stream</span> <span style=color:#000>MockReq</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>MockResp</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>ServerStreamingTest</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>MockReq</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>stream</span> <span style=color:#000>MockResp</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>BidirectionalStreamingTest</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>stream</span> <span style=color:#000>MockReq</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>stream</span> <span style=color:#000>MockResp</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>If the client needs to support streaming generic calls, the streaming protocol must be confirmed. By default, the streaming protocol for the generic client generated in this way is <code>TTHeaderStreaming</code>, and non-streaming messages are <code>Framed</code> or <code>TTHeaderFramed</code>. <strong>If you need to configure it to use the GRPC protocol, add the following client options</strong>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>genericclient</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;service&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BinaryThriftGeneric</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithTransportProtocol</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>transport</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GRPC</span><span style=color:#000;font-weight:700>))</span>
</span></span></code></pre></div><ol start=2><li>Generic Call</li></ol><p>The request/response or stream messages passed in a generic call are the result of protobuf serialization. After the generic client is initialized, it provides 4 streaming mode call methods. For detailed usage of streaming, see: <a href=https://www.cloudwego.io/zh/docs/kitex/tutorials/basic-feature/streamx/stream+basic+programming/>StreamX Basic Stream Programming</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// unary</span>
</span></span><span style=display:flex><span><span style=color:#000>resp</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GenericCall</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;UnaryTest&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>buf</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// client streaming</span>
</span></span><span style=display:flex><span><span style=color:#000>stream</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ClientStreaming</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;ClientStreamingTest&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// server streaming</span>
</span></span><span style=display:flex><span><span style=color:#000>stream</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ServerStreaming</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;ServerStreamingTest&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>buf</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// bidi streaming</span>
</span></span><span style=display:flex><span><span style=color:#000>stream</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BidirectionalStreaming</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;BidirectionalStreamingTest&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Detailed usage example: <a href=https://github.com/cloudwego/kitex-tests/blob/main/generic/streamxbinarypb/generic_test.go>https://github.com/cloudwego/kitex-tests/blob/main/generic/streamxbinarypb/generic_test.go</a></p><h3 id=map-mapping-generic-call>Map-Mapping Generic Call</h3><p>Map-mapping generic call means that users can directly construct Map request parameters or returns according to the specification, and Kitex will perform the corresponding Thrift encoding and decoding.</p><h4 id=map-construction>Map Construction</h4><p>Kitex will strictly verify the field names and types constructed by the user according to the given IDL. Field names only support string types corresponding to Map Keys (the map key preferentially takes the value defined by the json tag, followed by the field name, refer to the <strong>Special Note - JSON Generic</strong> section). The type mapping of field Values is shown in the table below.</p><p>For the return, it will verify the Field ID and type of the Response, and generate the corresponding Map Key according to the Field Name in the IDL.</p><h4 id=type-mapping>Type Mapping</h4><p>The mapping between Golang and Thrift IDL types is as follows:</p><p><strong>Write Mapping</strong></p><table><thead><tr><th><strong>Golang Type</strong><br></th><th><strong>Thrift IDL Type</strong><br></th></tr></thead><tbody><tr><td>bool<br></td><td>bool<br></td></tr><tr><td>int8, byte<br></td><td>i8, byte<br></td></tr><tr><td>int16<br></td><td>i16<br></td></tr><tr><td>int32<br></td><td>i32, i16, i8<br></td></tr><tr><td>int64<br></td><td>i64<br></td></tr><tr><td>float64<br></td><td>double, i64, i32, i16, i8<br></td></tr><tr><td>string<br></td><td>string,binary<br></td></tr><tr><td>[]byte<br></td><td>binary,string<br></td></tr><tr><td>[]interface{}<br></td><td>list/set<br></td></tr><tr><td>map[interface{}]interface{}<br></td><td>map<br></td></tr><tr><td>map[string]interface{}<br></td><td>struct<br></td></tr><tr><td>int32<br></td><td>enum<br></td></tr></tbody></table><p><strong>Read Mapping</strong></p><table><thead><tr><th><strong>Thrift IDL Type</strong><br></th><th><strong>Golang Type (read)</strong><br></th><th><strong>Note</strong><br></th></tr></thead><tbody><tr><td>bool<br></td><td>bool<br></td><td><br></td></tr><tr><td>i8,<br></td><td>int8<br></td><td><br></td></tr><tr><td>byte<br></td><td>byte<br></td><td><br></td></tr><tr><td>i16<br></td><td>int16<br></td><td><br></td></tr><tr><td>i32<br></td><td>int32<br></td><td><br></td></tr><tr><td>i64<br></td><td>int64<br></td><td><br></td></tr><tr><td>double<br></td><td>float64<br></td><td><br></td></tr><tr><td>string<br></td><td>string<br></td><td><br></td></tr><tr><td>binary<br></td><td>[]byte<br></td><td>By default, it returns a String. If you need to return []byte, you need to set it through <a href=https://github.com/cloudwego/kitex/blob/develop/pkg/generic/generic.go#L159>SetBinaryWithByteSlice</a>.<br>g, err := generic.MapThriftGeneric(p)<br>err = generic.SetBinaryWithByteSlice(g, true)<br></td></tr><tr><td>list/set<br></td><td>[]interface{}<br></td><td><br></td></tr><tr><td>map<br></td><td>map[interface{}]interface{}<br></td><td><br></td></tr><tr><td>struct<br></td><td>map[string]interface{}<br></td><td><br></td></tr><tr><td>enum<br></td><td>int32<br></td><td><br></td></tr></tbody></table><h4 id=data-example>Data Example</h4><p>Taking the following IDL as an example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-thrift data-lang=thrift><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ErrorCode</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>SUCCESS</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>FAILURE</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Info</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Map</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ID</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>EchoRequest</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Msg</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>i8</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>I8</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i16</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>I16</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i32</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>I32</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>I64</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>binary</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Binary</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Map</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Set</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>list</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>List</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ErrorCode</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ErrorCode</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>11</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Info</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Info</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>255</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Base</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Base</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Construct the request as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>req</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;Msg&#34;</span><span style=color:#000;font-weight:700>:</span>    <span style=color:#4e9a06>&#34;hello&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;I8&#34;</span><span style=color:#000;font-weight:700>:</span>     <span style=color:#204a87>int8</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;I16&#34;</span><span style=color:#000;font-weight:700>:</span>    <span style=color:#204a87>int16</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;I32&#34;</span><span style=color:#000;font-weight:700>:</span>    <span style=color:#204a87>int32</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;I64&#34;</span><span style=color:#000;font-weight:700>:</span>    <span style=color:#204a87>int64</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;Binary&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87>byte</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;hello&#34;</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;Map&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span>
</span></span><span style=display:flex><span>                        <span style=color:#4e9a06>&#34;hello&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;world&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;Set&#34;</span><span style=color:#000;font-weight:700>:</span>       <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span><span style=color:#4e9a06>&#34;hello&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;world&#34;</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;List&#34;</span><span style=color:#000;font-weight:700>:</span>      <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span><span style=color:#4e9a06>&#34;hello&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;world&#34;</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;ErrorCode&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int32</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>                <span style=color:#4e9a06>&#34;Info&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span>
</span></span><span style=display:flex><span>                        <span style=color:#4e9a06>&#34;Map&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span>
</span></span><span style=display:flex><span>                                <span style=color:#4e9a06>&#34;hello&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;world&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                        <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>                        <span style=color:#4e9a06>&#34;ID&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int64</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>232324</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>                <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>                <span style=color:#8f5902;font-style:italic>// Note: A value in the format of ([]interface{})(nil) will also be treated as a null value for encoding.</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><code>base.thrift</code></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>namespace</span> <span style=color:#000>py</span> <span style=color:#000>base</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>namespace</span> <span style=color:#000>go</span> <span style=color:#000>base</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>namespace</span> <span style=color:#000>java</span> <span style=color:#000>com</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>bytedance</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>thrift</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>base</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000>TrafficEnv</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>1</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>Open</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87>false</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>2</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>string</span> <span style=color:#000>Env</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000>Base</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>1</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>string</span> <span style=color:#000>LogID</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>2</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>string</span> <span style=color:#000>Caller</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>3</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>string</span> <span style=color:#000>Addr</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>4</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>string</span> <span style=color:#000>Client</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>5</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>optional</span> <span style=color:#000>TrafficEnv</span> <span style=color:#000>TrafficEnv</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>6</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>optional</span> <span style=color:#000>map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>Extra</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000>BaseResp</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>1</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>string</span> <span style=color:#000>StatusMessage</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>2</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>i32</span> <span style=color:#000>StatusCode</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>3</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>optional</span> <span style=color:#000>map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>Extra</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><code>YOUR_IDL.thrift</code></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-thrift data-lang=thrift><span style=display:flex><span><span style=color:#204a87;font-weight:700>include</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;base.thrift&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>namespace</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>go</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>kitex.test.server</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ExampleReq</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>required</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Msg</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>255</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>base.Base</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Base</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ExampleResp</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>required</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Msg</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>255</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>base.BaseResp</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BaseResp</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>service</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ExampleService</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>ExampleResp</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ExampleMethod</span><span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ExampleReq</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>req</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><h4 id=client-side-usage-supports-streaming-and-non-streaming-calls>Client-side Usage (supports streaming and non-streaming calls)</h4><p>Streaming calls require <code>cloudwego/kitex >= v0.14.1</code>.</p><ol><li>Client Initialization</li></ol><p>Note: <strong>Do not</strong> create a new Client for each request (as each client consumes extra resources). It is recommended to create one client for each downstream service when the process starts, or use a Client Pool indexed by the downstream service.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>   <span style=color:#000>genericclient</span> <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/client/genericclient&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Parse local IDL file</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// YOUR_IDL_PATH thrift file path: e.g., ./idl/example.thrift</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// includeDirs: specify include paths, defaults to using relative paths from the current file to find includes</span>
</span></span><span style=display:flex><span>    <span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewThriftFileProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;./YOUR_IDL_PATH&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Construct a map request and response type generic call</span>
</span></span><span style=display:flex><span>    <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MapThriftGeneric</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>cli</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericclient</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;service&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>g</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>If the client needs to support streaming generic calls, the streaming protocol must be confirmed. By default, the streaming protocol for the generic client generated in this way is <code>TTHeaderStreaming</code>, and non-streaming messages are <code>Framed</code> or <code>TTHeaderFramed</code>. <strong>If you need to configure streaming methods to use the GRPC protocol without changing the protocol for non-streaming methods, add the following client options</strong>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>cli</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericclient</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;service&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithTransportProtocol</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>transport</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GRPCStreaming</span><span style=color:#000;font-weight:700>))</span>
</span></span></code></pre></div><ol start=2><li>Generic Call</li></ol><p>The request/response or stream messages passed in a generic call are of type <code>map[string]interface{}</code>. After the generic client is initialized, it provides 4 streaming mode call methods. For detailed usage of streaming, see: <a href=https://www.cloudwego.io/zh/docs/kitex/tutorials/basic-feature/streamx/stream+basic+programming/>StreamX Basic Stream Programming</a>.</p><ul><li><strong>Request</strong></li></ul><p>Type: map[string]interface{}</p><ul><li><strong>Response</strong></li></ul><p>Type: map[string]interface{}</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// unary</span>
</span></span><span style=display:flex><span><span style=color:#000>resp</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>cli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GenericCall</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;ExampleMethod&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;msg&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;hello&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic>// keys should be the same as defined in json tag</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>})</span> <span style=color:#8f5902;font-style:italic>// resp is a map[string]interface{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// client streaming</span>
</span></span><span style=display:flex><span><span style=color:#000>stream</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ClientStreaming</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;ClientStreamingTest&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// server streaming</span>
</span></span><span style=display:flex><span><span style=color:#000>stream</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ServerStreaming</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;ServerStreamingTest&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;msg&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;hello&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic>// keys should be the same as defined in json tag</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// bidi streaming</span>
</span></span><span style=display:flex><span><span style=color:#000>stream</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BidirectionalStreaming</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;BidirectionalStreamingTest&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Detailed usage example: <a href=https://github.com/cloudwego/kitex-tests/blob/main/generic/streamxmap/generic_test.go>https://github.com/cloudwego/kitex-tests/blob/main/generic/streamxmap/generic_test.go</a></p><h4 id=server-side-usage-non-streaming-requests-only>Server-side Usage (non-streaming requests only)</h4><ul><li><strong>Request</strong></li></ul><p>Type: map[string]interface{}</p><ul><li><strong>Response</strong></li></ul><p>Type: map[string]interface{}</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>bgeneric</span> <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/server/genericserver&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Parse local IDL file</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// YOUR_IDL_PATH thrift file path: e.g. ./idl/example.thrift</span>
</span></span><span style=display:flex><span>    <span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewThriftFileProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;./YOUR_IDL_PATH&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Construct a map request and response type generic call</span>
</span></span><span style=display:flex><span>    <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MapThriftGeneric</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>svc</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>bgeneric</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewServer</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GenericServiceImpl</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>opts</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>svr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Run</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// resp is a map[string]interface{}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>GenericServiceImpl</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>g</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>GenericServiceImpl</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>GenericCall</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>method</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>request</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{},</span> <span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>m</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>.(</span><span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span>
</span></span><span style=display:flex><span>        <span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Printf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Recv: %v\n&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>m</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span>  <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span>
</span></span><span style=display:flex><span>            <span style=color:#4e9a06>&#34;Msg&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;world&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>},</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h4 id=special-note---map-generic>Special Note - Map Generic</h4><ol><li>It will verify the field ID and type of the response and generate the corresponding map key according to the field name in the IDL. The field ID and type here need to be consistent with the IDL definition; otherwise, it will lead to undefined behavior.</li><li>If you confirm that all map type keys defined in thrift are string type and you do not want to use <code>map[interface{}]interface{}</code> type parameters to construct/parse messages, you can use <code>MapThriftGenericForJSON</code> to construct the generic call.</li><li>For an <strong>empty struct</strong>, the generic call will generate an empty map by default instead of an empty struct, which means <strong>its subfields will not appear in the map</strong>. If you need to set its subfields in the empty map at the same time, you can use the setting <a href=https://github.com/cloudwego/kitex/pull/1265/files#diff-605c96e826099f4fa61d7d4a328caa529da4097e99585917afa3c38cf291eb7bR206>EnableSetFieldsForEmptyStruct</a>.</li></ol><h4 id=map-mapping-generic-serialization-generally-no-need-to-pay-attention>Map-Mapping Generic Serialization (generally no need to pay attention)</h4><p>Main interfaces:</p><ul><li>Serialization</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>WriteStruct</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Write</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>out</span> <span style=color:#000>bufiox</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Writer</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>msg</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{},</span> <span style=color:#000>method</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>isClient</span> <span style=color:#204a87;font-weight:700>bool</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>requestBase</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>base</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Base</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>error</span>
</span></span></code></pre></div><ul><li>Deserialization</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>ReadStruct</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Read</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>method</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>isClient</span> <span style=color:#204a87;font-weight:700>bool</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>dataLen</span> <span style=color:#204a87;font-weight:700>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>in</span> <span style=color:#000>bufiox</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Reader</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{},</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><ul><li>Use Case</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;context&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;github.com/cloudwego/gopkg/bufiox&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;github.com/cloudwego/gopkg/protocol/thrift/base&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic/thrift&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Parse local IDL file</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// YOUR_IDL_PATH thrift file path: e.g. ./idl/example.thrift</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// includeDirs: specify include paths, defaults to using relative paths from the current file to find includes</span>
</span></span><span style=display:flex><span>    <span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewThriftFileProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;YOUR_IDL_PATH&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Get a reader writer from p</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>        <span style=color:#000>rw</span>         <span style=color:#000;font-weight:700>=</span> <span style=color:#000>thrift</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewStructReaderWriter</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&lt;-</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Provide</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>        <span style=color:#000>buf</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>byte</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#8f5902;font-style:italic>// Recommended to be nil</span>
</span></span><span style=display:flex><span>        <span style=color:#000>req</span>        <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span><span style=color:#4e9a06>&#34;Msg&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;hello&#34;</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000>w</span>          <span style=color:#000;font-weight:700>=</span> <span style=color:#000>bufiox</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewBytesWriter</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>buf</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Serialize the request</span>
</span></span><span style=display:flex><span>    <span style=color:#000>err</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#000>rw</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Write</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>w</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>req</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;ExampleMethod&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>base</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Base</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>LogID</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;1&#34;</span><span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#000>w</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Flush</span><span style=color:#000;font-weight:700>()</span> <span style=color:#8f5902;font-style:italic>// Important!!!</span>
</span></span><span style=display:flex><span>    <span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Println</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;buf:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>buf</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buf</span><span style=color:#000;font-weight:700>),</span> <span style=color:#204a87>cap</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buf</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Deserialize the request</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// If deserializing a response, then isClient = true</span>
</span></span><span style=display:flex><span>    <span style=color:#000>r</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>bufiox</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewBytesReader</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buf</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>req2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>rw</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Read</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#4e9a06>&#34;ExampleMethod&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>buf</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>r</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// req2: map[Base:map[Addr: Caller: Client: LogID:1] Msg:hello]</span>
</span></span><span style=display:flex><span>    <span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Println</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;req2:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>req2</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>In Map generic serialization, you <strong>need to call</strong> <code>w.Flush()</code> after serializing the request. If the initial <code>len(buf)</code> > <code>len(serialized message)</code>, the message body will be at the end of <code>buf</code>. It is recommended to initialize <code>buf</code> as <code>nil</code>.</p><h3 id=json-mapping-generic-call>JSON-Mapping Generic Call</h3><p>JSON-mapping generic call means that users can directly construct JSON String request parameters or returns according to the specification, and Kitex will perform the corresponding Thrift encoding and decoding.</p><p>Note: Kitex has supported a higher-performance implementation of generic calls. For usage, see <a href=https://www.cloudwego.io/zh/docs/kitex/tutorials/advanced-feature/generic-call/generic-call-dynamicgo/>Guide to Accessing dynamicgo for Generic Calls</a>.</p><h4 id=json-construction>JSON Construction</h4><p>Unlike Map generic calls, which strictly verify the field names and types constructed by the user, JSON generic calls will convert the user&rsquo;s request parameters according to the given IDL, without requiring the user to specify explicit types like int32 or int64.</p><p>For the Response, it will verify the Field ID and type, and generate the corresponding JSON Field according to the Field Name in the IDL.</p><p>Currently supports <strong>Kitex-Thrift</strong> and <strong>Kitex-Protobuf</strong> for downstream calls.</p><h4 id=jsonthrift-generic>JSON&lt;>Thrift Generic</h4><h5 id=type-mapping-1>Type Mapping</h5><p>The mapping between Golang and Thrift IDL types is as follows:</p><table><thead><tr><th>Golang Type<br></th><th>Thrift IDL Type<br></th><th>Note<br></th></tr></thead><tbody><tr><td>bool<br></td><td>bool<br></td><td><br></td></tr><tr><td>int8<br></td><td>i8<br></td><td><br></td></tr><tr><td>int16<br></td><td>i16<br></td><td><br></td></tr><tr><td>int32<br></td><td>i32<br></td><td><br></td></tr><tr><td>int64<br></td><td>i64<br></td><td><br></td></tr><tr><td>float64<br></td><td>double<br></td><td></td></tr><tr><td>[]byte<br></td><td>binary<br></td><td>binary construction requires base64 encoding<br><a href=https://bytedance.feishu.cn/docx/doxcnxkmeIRGVe6K5M0vVIAN5be>Generic call binary type compatibility</a><br></td></tr><tr><td>[]interface{}<br></td><td>list/set<br></td><td><br></td></tr><tr><td>map[interface{}]interface{}<br></td><td>map<br></td><td><br></td></tr><tr><td>map[string]interface{}<br></td><td>struct<br></td><td><br></td></tr><tr><td>int32<br></td><td>enum<br></td><td><br></td></tr></tbody></table><h5 id=data-example-1>Data Example</h5><p>Taking the following IDL as an example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-thrift data-lang=thrift><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ErrorCode</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>SUCCESS</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>FAILURE</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Info</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Map</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ID</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>EchoRequest</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Msg</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>i8</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>I8</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i16</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>I16</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i32</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>I32</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>I64</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Map</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>set</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Set</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>list</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>List</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ErrorCode</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ErrorCode</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Info</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Info</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>255</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Base</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Base</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Construct the request as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>req</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#4e9a06>&#34;{
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  \&#34;Msg\&#34;: \&#34;hello\&#34;,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  \&#34;I8\&#34;: 1,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  \&#34;I16\&#34;: 1,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  \&#34;I32\&#34;: 1,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  \&#34;I64\&#34;: 1,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  \&#34;Map\&#34;: \&#34;{\&#34;hello\&#34;:\&#34;world\&#34;}\&#34;,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  \&#34;Set\&#34;: [\&#34;hello\&#34;, \&#34;world\&#34;],
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  \&#34;List\&#34;: [\&#34;hello\&#34;, \&#34;world\&#34;],
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  \&#34;ErrorCode\&#34;: 1,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  \&#34;Info\&#34;: \&#34;{\&#34;Map\&#34;:\&#34;{\&#34;hello\&#34;:\&#34;world\&#34;}\&#34;, \&#34;ID\&#34;:232324}\&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>}&#34;</span>
</span></span></code></pre></div><p>Example IDL:</p><p><code>base.thrift</code></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-thrift data-lang=thrift><span style=display:flex><span><span style=color:#204a87;font-weight:700>namespace</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>py</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>base</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>namespace</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>go</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>base</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>namespace</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>java</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>com.xxx.thrift.base</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>TrafficEnv</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>bool</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Open</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Env</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Base</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>LogID</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Caller</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Addr</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Client</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>TrafficEnv</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>TrafficEnv</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Extra</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BaseResp</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>StatusMessage</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i32</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>StatusCode</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Extra</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p><code>example_service.thrift</code></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>include</span> <span style=color:#4e9a06>&#34;base.thrift&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>namespace</span> <span style=color:#204a87;font-weight:700>go</span> <span style=color:#000>kitex</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>test</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>server</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000>ExampleReq</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>required</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>Msg</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>255</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>base</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Base</span> <span style=color:#000>Base</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000>ExampleResp</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>required</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>Msg</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>255</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>base</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BaseResp</span> <span style=color:#000>BaseResp</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000>service</span> <span style=color:#000>ExampleService</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>ExampleResp</span> <span style=color:#000>ExampleMethod</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>ExampleReq</span> <span style=color:#000>req</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h5 id=client-side-usage-supports-streaming-and-non-streaming-calls-1>Client-side Usage (supports streaming and non-streaming calls)</h5><p>Streaming calls require <code>cloudwego/kitex >= v0.14.1</code>.</p><ol><li>Client Initialization</li></ol><p>Note: <strong>Do not</strong> create a new Client for each request (as each client consumes extra resources). It is recommended to create one client for each downstream service when the process starts, or use a Client Pool indexed by the downstream service.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic&#34;</span>
</span></span><span style=display:flex><span>     <span style=color:#000>bgeneric</span> <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/client/genericclient&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Parse local IDL file</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// YOUR_IDL_PATH thrift file path: e.g. ./idl/example.thrift</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// includeDirs: specify include paths, defaults to using relative paths from the current file to find includes</span>
</span></span><span style=display:flex><span>    <span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewThriftFileProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;./YOUR_IDL_PATH&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Construct a JSON request and response type generic call</span>
</span></span><span style=display:flex><span>    <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JSONThriftGeneric</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>cli</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>bgeneric</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;service&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>opts</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>If the client needs to support streaming generic calls, the streaming protocol must be confirmed. By default, the streaming protocol for the generic client generated in this way is <code>TTHeaderStreaming</code>, and non-streaming messages are <code>Framed</code> or <code>TTHeaderFramed</code>. <strong>If you need to configure streaming methods to use the GRPC protocol without changing the protocol for non-streaming methods, add the following client options</strong>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>cli</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>bgeneric</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;service&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithTransportProtocol</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>transport</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GRPCStreaming</span><span style=color:#000;font-weight:700>))</span>
</span></span></code></pre></div><ol start=2><li>Generic Call</li></ol><p>The request/response or stream messages passed in a generic call are of type JSON string. After the generic client is initialized, it provides 4 streaming mode call methods. For detailed usage of streaming, see: <a href=https://www.cloudwego.io/zh/docs/kitex/tutorials/basic-feature/streamx/stream+basic+programming/>StreamX Basic Stream Programming</a>.</p><ul><li><strong>Request</strong></li></ul><p>Type: JSON string</p><ul><li><strong>Response</strong></li></ul><p>Type: JSON string</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// unary</span>
</span></span><span style=display:flex><span><span style=color:#000>resp</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>cli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GenericCall</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;ExampleMethod&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;{\&#34;Msg\&#34;: \&#34;hello\&#34;}&#34;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic>// resp is a JSON string</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// client streaming</span>
</span></span><span style=display:flex><span><span style=color:#000>stream</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ClientStreaming</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;ClientStreamingTest&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// server streaming</span>
</span></span><span style=display:flex><span><span style=color:#000>stream</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ServerStreaming</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;ServerStreamingTest&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;{\&#34;Msg\&#34;: \&#34;hello\&#34;}&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// bidi streaming</span>
</span></span><span style=display:flex><span><span style=color:#000>stream</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericCli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>BidirectionalStreaming</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;BidirectionalStreamingTest&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>Detailed usage example: <a href=https://github.com/cloudwego/kitex-tests/blob/main/generic/streamxjson/generic_test.go>https://github.com/cloudwego/kitex-tests/blob/main/generic/streamxjson/generic_test.go</a></p><h5 id=server-side-usage-non-streaming-requests-only-1><strong>Server-side Usage (non-streaming requests only)</strong></h5><ul><li><strong>Request</strong></li></ul><p>Type: JSON string</p><ul><li><strong>Response</strong></li></ul><p>Type: JSON string</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>bgeneric</span> <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/server/genericserver&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Parse local IDL file</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// YOUR_IDL_PATH thrift file path: e.g. ./idl/example.thrift</span>
</span></span><span style=display:flex><span>    <span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewThriftFileProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;./YOUR_IDL_PATH&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Construct a JSON request and response type generic call</span>
</span></span><span style=display:flex><span>    <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JSONThriftGeneric</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>svc</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>bgeneric</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewServer</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GenericServiceImpl</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>opts</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>svr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Run</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// resp is a JSON string</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>GenericServiceImpl</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>g</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>GenericServiceImpl</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>GenericCall</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>method</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>request</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{},</span> <span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// use jsoniter or other json parse sdk to assert request </span>
</span></span><span style=display:flex><span>        <span style=color:#000>m</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>.(</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Printf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Recv: %v\n&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>m</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span>  <span style=color:#4e9a06>&#34;{\&#34;Msg\&#34;: \&#34;world\&#34;}&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h5 id=special-note>Special Note</h5><ul><li><p>Since JSON generic currently uses gjson, it performs a forced conversion for each field of the user&rsquo;s request according to the IDL (<a href=https://github.com/cloudwego/kitex/blob/develop/pkg/generic/thrift/write.go#L130%29>https://github.com/cloudwego/kitex/blob/develop/pkg/generic/thrift/write.go#L130)</a>. Therefore, when the user passes the wrong field type, it will be replaced with a default value. For example, if the &ldquo;test&rdquo; field in the IDL requires i64, but the request is {&ldquo;test&rdquo;:&ldquo;abc&rdquo;}, this situation will not currently report an error, but will be modified to {&ldquo;test&rdquo;:0}. This issue will be more strictly restricted when switching to dynamicgo.</p></li><li><p>You can choose whether to globally enable the use of the <code>go.tag</code> value as the json key by setting an environment variable. This also applies to Map generic calls.</p></li></ul><pre tabindex=0><code># Use the original key as the key for JSON generic or Map generic calls, and disable the use of the go.tag key
KITEX_GENERIC_GOTAG_ALIAS_DISABLED = True
</code></pre><ul><li>Starting from <a href=mailto:cloudwego/kitex@v0.12.0>cloudwego/kitex@v0.12.0</a>, go.tag can be disabled via the <code>generic.WithGoTagDisabled</code> option. This allows specifying whether to disable the go.tag annotation for client/server generic calls individually.</li></ul><p>Example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// when you use ThriftFileProvider</span>
</span></span><span style=display:flex><span><span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewThriftFileProviderWithOption</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>path</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ThriftIDLProviderOption</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithGoTagDisabled</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>)})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// when you use ThriftContentProvider</span>
</span></span><span style=display:flex><span><span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewThriftContentProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>serviceContent</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>includes</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithGoTagDisabled</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// when you use ThriftContentWithAbsIncludePathProvider</span>
</span></span><span style=display:flex><span><span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewThriftContentWithAbsIncludePathProvider</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>path</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>includes</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithGoTagDisabled</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>))</span>
</span></span></code></pre></div><h4 id=jsonprotobuf-generic>JSON&lt;>Protobuf Generic</h4><p>Currently only for the <strong>KitexProtobuf protocol</strong>. Pass in the IDL Provider and optional Option parameters to return a Protobuf JSON generic call object. For Option parameters, see the Guide to Accessing DynamicGo for Generic Calls.</p><h5 id=type-mapping-2>Type Mapping</h5><p>The mapping between Golang and Proto IDL types is as follows:</p><table><thead><tr><th>Protocol Buffers Type</th><th>Golang Type</th></tr></thead><tbody><tr><td>float</td><td>float32</td></tr><tr><td>double</td><td>float64</td></tr><tr><td>int32</td><td>int32</td></tr><tr><td>int64</td><td>int64</td></tr><tr><td>uint32</td><td>uint32</td></tr><tr><td>uint64</td><td>uint64</td></tr><tr><td>sint32</td><td>int32</td></tr><tr><td>sint64</td><td>int64</td></tr><tr><td>fixed32</td><td>uint32</td></tr><tr><td>fixed64</td><td>uint64</td></tr><tr><td>sfixed32</td><td>int32</td></tr><tr><td>sfixed64</td><td>uint64</td></tr><tr><td>bool</td><td>bool</td></tr><tr><td>string</td><td>string</td></tr><tr><td>bytes</td><td>byte[]</td></tr></tbody></table><p>It also supports lists and dictionaries in JSON, mapping them to <code>repeated V</code> and <code>map&lt;K,V></code> in protobuf. Special types in protobuf, such as <code>Enum</code> and <code>oneof</code>, are not supported.</p><h5 id=example-idl>Example IDL</h5><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-protobuf data-lang=protobuf><span style=display:flex><span><span style=color:#000>syntax</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;proto3&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>api</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902;font-style:italic>// The greeting service definition.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>go_package</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;api&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Request</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#204a87;font-weight:700>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Response</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#204a87;font-weight:700>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>service</span> <span style=color:#000>Echo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>EchoPB</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Request</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Response</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><h5 id=client>Client</h5><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;context&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>dproto</span> <span style=color:#4e9a06>&#34;github.com/cloudwego/dynamicgo/proto&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/client&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/client/genericclient&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/klog&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/transport&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>serverHostPort</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;127.0.0.1:9999&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>path</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#4e9a06>&#34;./YOUR_IDL_PATH&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// Create Pb IDL Provider</span>
</span></span><span style=display:flex><span>        <span style=color:#000>dOpts</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>dproto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Options</span><span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span>        <span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewPbFileProviderWithDynamicGo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>path</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>dOpts</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic>// Create Generic client</span>
</span></span><span style=display:flex><span>        <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JSONPbGeneric</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>opts</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Option</span>
</span></span><span style=display:flex><span>        <span style=color:#000>opts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithHostPorts</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>serverHostPort</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>        <span style=color:#000>opts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>client</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithTransportProtocol</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>transport</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>TTHeader</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>cli</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericclient</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewClient</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;server_name_for_discovery&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>opts</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>jReq</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#4e9a06>`{&#34;message&#34;: &#34;hello&#34;}`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>ctx</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// JRsp type is JSON string</span>
</span></span><span style=display:flex><span>        <span style=color:#000>jRsp</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>cli</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GenericCall</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;EchoPB&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>jReq</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>klog</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>CtxInfof</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;genericJsonCall: jRsp(%T) = %s, err = %v&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>jRsp</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>jRsp</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h5 id=server>Server</h5><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;context&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#000>dproto</span> <span style=color:#4e9a06>&#34;github.com/cloudwego/dynamicgo/proto&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/klog&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/server&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/server/genericserver&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;net&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>serverHostPort</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#4e9a06>&#34;127.0.0.1:9999&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>WithServiceAddr</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hostPort</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Option</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>addr</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>_</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>net</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ResolveTCPAddr</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;tcp&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>hostPort</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>WithServiceAddr</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>addr</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>GenericEchoImpl</span> <span style=color:#204a87;font-weight:700>struct</span><span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>g</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>GenericEchoImpl</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>GenericCall</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Context</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>method</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>request</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{},</span> <span style=color:#000>err</span> <span style=color:#204a87;font-weight:700>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>buf</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>.(</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>buf</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>nil</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>main</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>opts</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#000>server</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Option</span>
</span></span><span style=display:flex><span>        <span style=color:#000>opts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>WithServiceAddr</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>serverHostPort</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>path</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#4e9a06>&#34;./YOUR_IDL_PATH&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>dOpts</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>dproto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Options</span><span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span>        <span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewPbFileProviderWithDynamicGo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>path</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>context</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Background</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>dOpts</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87>panic</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>generic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>JSONPbGeneric</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>opts</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>opts</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>WithServiceAddr</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>serverHostPort</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#000>svr</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>genericserver</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>NewServer</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>new</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>GenericEchoImpl</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>opts</span><span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>svr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Run</span><span style=color:#000;font-weight:700>();</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#204a87;font-weight:700>nil</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>                <span style=color:#000>klog</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Infof</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>err</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Error</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=performance-benchmark-comparison>Performance Benchmark Comparison</h2><p>The following test results use a complex struct with multiple nests as the benchmark payload, with concurrency controlled at 100. The server is allocated a 4-core <code>Intel(R) Xeon(R) Gold 5118 CPU @ 2.30GHz</code>. The benchmark code can be found at this <a href=https://github.com/cloudwego/kitex-benchmark/pull/57/files>link</a>.</p><table><thead><tr><th><strong>Generic Type</strong><br></th><th><strong>TPS</strong><br><br></th><th><strong>TP99</strong><br><br></th><th><strong>TP999</strong><br><br></th><th><strong>Server CPU AVG</strong><br></th><th><strong>Client CPU AVG</strong><br></th><th><strong>Throughput Difference (vs. no generic)</strong><br></th></tr></thead><tbody><tr><td><strong>No Generic</strong><br></td><td>147006<br></td><td>1.60ms<br></td><td>3.45ms<br></td><td>391.48<br></td><td>544.83<br></td><td>0%<br></td></tr><tr><td><strong>Map Generic</strong><br></td><td>78104<br></td><td>3.58ms<br></td><td>21.88ms<br></td><td>392.62<br></td><td>509.70<br></td><td>-47%<br></td></tr><tr><td><strong>JSON Generic - No dynamicgo</strong><br></td><td>19647<br></td><td>21.49ms<br></td><td>61.52ms<br></td><td>392.20<br></td><td>494.30<br></td><td>-86%<br></td></tr><tr><td><strong>HTTP Generic - No dynamicgo</strong><br></td><td>136093<br></td><td>2.57ms<br></td><td>5.18ms<br></td><td>369.61<br><br></td><td>1329.26<br></td><td>-8%<br></td></tr></tbody></table><p>Json / http generic supports using dynamicgo for higher performance. The following are the performance test results under 2k qps, 100 concurrency, and 10k packet size. The server is allocated a 4-core <code>Intel (R) Xeon (R) Gold 5118 CPU @2.30GHz</code>.</p><table><thead><tr><th><strong>Generic Type</strong><br></th><th><strong>With dynamicgo</strong><br></th><th><strong>TPS</strong><br></th><th><strong>TP99</strong><br></th><th><strong>TP999</strong><br></th><th><strong>Throughput differences</strong><br></th></tr></thead><tbody><tr><td><strong>json generic</strong><br></td><td>no<br></td><td>2466.90<br></td><td>141.38ms<br></td><td>206.25ms<br></td><td>0%<br></td></tr><tr><td><br></td><td>yes<br></td><td>9179.28<br></td><td>34.75ms<br></td><td>80.75ms<br></td><td>+272%<br></td></tr><tr><td><strong>http generic</strong><br><br></td><td>no<br></td><td>8338.20<br></td><td>90.92ms<br></td><td>139.31ms<br></td><td>0%<br></td></tr><tr><td><br></td><td>yes<br></td><td>27243.95<br></td><td>9.57ms<br></td><td>23.76ms<br></td><td>+227%<br></td></tr></tbody></table><h2 id=faq>FAQ</h2><h3 id=q-is-it-necessary-to-reference-the-idl-for-generic-calls>Q: Is it necessary to reference the IDL for generic calls?</h3><ul><li>Binary stream forwarding: No</li><li>HTTP/MAP/JSON: Yes<ul><li>Because the request only contains field names, the IDL is needed to provide the mapping from &ldquo;field name -> field ID&rdquo;. The serialized thrift binary only contains field IDs.</li></ul></li></ul><h3 id=q-will-the-framework-do-corresponding-metrics-reporting-when-using-binary-stream-forwarding>Q: Will the framework do corresponding metrics reporting when using binary stream forwarding?</h3><p>Yes, it will.</p><h3 id=q-missing-version-in-thrift-message>Q: &ldquo;missing version in Thrift Message&rdquo;</h3><p>This indicates that the passed buffer is not a correctly encoded Thrift buff. Please confirm the usage.
Note: The binary encoding is not performed on the original Thrift request (e.g., <a href=https://github.com/cloudwego/kitex-examples/blob/v0.2.0/hello/kitex_gen/api/hello.go#L12>api.Request</a>) parameters, but on the <strong>XXXArgs</strong> that wrap the method parameters (e.g., <a href=https://github.com/cloudwego/kitex-examples/blob/v0.2.0/hello/kitex_gen/api/hello.go#L461>api.HelloEchoArgs</a>).</p><h3 id=q-is-protobuf-supported>Q: Is protobuf supported?</h3><p>Currently, map generic supports it, and json generic is planned to support it.</p><h3 id=q-does-generic-call-support-default-values-defined-in-the-idl>Q: Does generic call support default values defined in the idl?</h3><p>Kitex map/http/json generic supports setting default values defined in the idl when reading, as in the idl file in the following example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-thrift data-lang=thrift><span style=display:flex><span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BaseElem</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i32</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Request</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>byte</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>a</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i32</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>b</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>double</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>c</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5.1</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>d</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#34;123&#34;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>list</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BaseElem</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>e</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[{</span><span style=color:#4e9a06>&#34;a&#34;</span><span style=color:#000;font-weight:700>:</span><span style=color:#0000cf;font-weight:700>34</span><span style=color:#000;font-weight:700>}]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>i32</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>BaseElem</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>f</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#0000cf;font-weight:700>12</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;a&#34;</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>34</span><span style=color:#000;font-weight:700>}}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>When encoding a request containing the above default values to the peer,</p><ul><li>For map generic, it will automatically add k-v pairs with the above field names as keys and default values as values.</li><li>For json generic, the encoded json string will contain the k-v pairs defined with default values.</li><li>For http generic, it will set the default value at the field where the response annotation is located.</li></ul><h3 id=q-the-generated-type-for-a-field-modified-with-optional-has-a-pointer-does-the-value-in-map-generic-also-need-to-be-a-pointer>Q: The generated type for a field modified with optional has a pointer. Does the value in map generic also need to be a pointer?</h3><p>No.</p><h3 id=q-there-are-multiple-services-defined-in-the-idl-file-how-to-handle-this-in-generic-calls>Q: There are multiple services defined in the idl file. How to handle this in generic calls?</h3><p>Each generic client/server uses the last service definition by default. You can specify a particular service to parse with the following code:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#4e9a06>&#34;github.com/cloudwego/kitex/pkg/generic&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>path</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#4e9a06>&#34;json_test/idl/example_multi_service.thrift&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>opts</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#000>ThriftIDLProviderOption</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>WithIDLServiceName</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;ExampleService&#34;</span><span style=color:#000;font-weight:700>)}</span>
</span></span><span style=display:flex><span><span style=color:#000>p</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>err</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>NewThriftFileProviderWithOption</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>path</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>opts</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h3 id=q-server-error-readstring-the-string-size-greater-than-buf-length>Q: Server error &ldquo;[ReadString] the string size greater than buf length&rdquo;</h3><p>It may be that the idl of the client and server are different, for example, the field types are inconsistent.</p><h3 id=q-map-generic-call-byte-type-field-panics-in-writeint8-function>Q: map generic call byte type field panics in writeInt8 function</h3><blockquote><p>github.com/cloudwego/kitex/pkg/generic/thrift.writeInt8(&mldr;)
/&mldr;/github.com/cloudwego/kitex@v0.4.4/pkg/generic/thrift/write.go:312 +0xb4</p></blockquote><p><strong>Reason</strong>: thriftgo aligns with the implementation of apache thrift and converts all byte type fields in the IDL to int8 type in go. Therefore, older versions of kitex (&lt;0.6.0) did not adapt for the byte type in <code>writeInt8</code>.</p><p><strong>Suggestion</strong>:</p><ol><li>Client side:<ul><li>Upgrade to a new version: kitex >= 0.6.0 (or)</li><li>Keep the old version: use <code>int(byteVal)</code> to assign a value to the field when constructing the map.</li></ul></li><li>Server side: convert the int8 field to byte type (if there are values > 127).</li></ol><p>Note: Converting between byte and int8 does not lose precision.</p><h3 id=q-binary-generic-server-invalid-trans-buffer-in-binarythriftcodec-unmarshal->Q: binary generic-server: &ldquo;invalid trans buffer in binaryThriftCodec Unmarshal&rdquo; ?</h3><p>The packet received by a binary generic server must have a header size, because binary generic does not parse the Thrift packet, and packets without a header size cannot be processed normally.
If you encounter this problem, the upstream client needs to configure the transport protocol to framed or ttheader. See <a href=https://www.cloudwego.io/zh/docs/kitex/tutorials/basic-feature/protocol/transport_protocol/>How to specify the transport protocol</a>.</p><h3 id=q-how-to-inject-different-generic-implementations-for-different-idl-services-under-one-server>Q: How to inject different generic implementations for different idl services under one server?</h3><p>All generic call types <strong>except BinaryThriftGeneric</strong> are supported. BinaryThriftGeneric can only be enabled via <code>genericserver.NewServer</code> or <code>genericserver.NewServerWithServiceInfo</code>.</p><pre tabindex=0><code>func runServer(ln net.Listener) error {
    svr := server.NewServer()

    p, err := generic.NewThriftFileProvider(&#34;idl/tenant.thrift&#34;)
    if err != nil {
       panic(err)
    }
    g, err := generic.MapThriftGeneric(p)
    if err != nil {
       panic(err)
    }
    svr.RegisterService(generic.ServiceInfoWithGeneric(g), &amp;MapGenericServiceImpl{})

    p, err = generic.NewThriftFileProvider(&#34;idl/echo.thrift&#34;)
    if err != nil {
       panic(err)
    }
    g, err := generic.JSONThriftGeneric(p)
    if err != nil {
       panic(err)
    }

    svr.RegisterService(generic.ServiceInfoWithGeneric(g), &amp;JsonGenericServiceImpl{})
    
    return svr.Run()
}
</code></pre><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof ga!="function")return;const t={command:"send",hitType:"event",category:"Helpful",action:"click",label:window.location.pathname,value:e};ga(t.command,t.hitType,t.category,t.action,t.label,t.value)};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(1)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified
August 18, 2025
: <a href=https://github.com/cloudwego/cloudwego.github.io/commit/a0b8b38f694bafe64bf9d05d180f2e986af4e49c>docs(eino): delete notice of EinoDev only supporting Goland (a0b8b38)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Lark aria-label=Lark><a class=text-white target=_blank rel=noopener href="https://applink.feishu.cn/client/chat/chatter/add_by_link?link_token=693v2544-2664-4421-b50f-7f1912p745r6" aria-label=Lark><img src=/webfonts/lark.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px;fill:#fff></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/CloudWeGo aria-label=Twitter><img src=/webfonts/x-twitter.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px;fill:#fff></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/cloudwego aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel=noopener href=https://discord.gg/jceZSE7DsW aria-label=Discord><i class="fab fa-discord"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2025 The CloudWeGo Authors</small><p class="mt-2 text-white"><a class=cloudwego-link href=/about/ target=_blank rel=noopener>About</a>
|
<a class=cloudwego-link href=https://github.com/cloudwego/cloudwego.github.io/blob/main/LICENSE target=_blank rel=noopener>License</a></p></div></div></div></footer></div><script src=/js/popper.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/main.min.9a8648b987db06195f5768f0d7516e8df7c27669e91e383e25c5d07cd6325605.js integrity="sha256-moZIuYfbBhlfV2jw11FujffCdmnpHjg+JcXQfNYyVgU=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/prism-custom.js></script><script src=/js/tabpane-persist.js></script><script src=/js/docsearch.js></script><script type=text/javascript>let siteLang=window.location.pathname.startsWith("/zh/")?"zh":"en";docsearch({appId:"V7I042F992",apiKey:"8380a7ac88106841cb43fb000fa2edb4",indexName:"cloudwego",container:"#docsearch",searchParameters:{hitsPerPage:5,facetFilters:[`lang:${siteLang}`]},transformItems(e){return e.map(e=>({...e,url:e.url.replace("www.cloudwego.io",location.host).replace("https:",location.protocol)}))}})</script><script src=/js/outbound-link.js></script><script src=/js/navScroll.js></script></body></html>